
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="smileatl 个人知识库，Welcome！在广袤的空间和无限的时间中，能与你共享同一颗行星与同一段时光是我的荣幸。">
      
      
        <meta name="author" content="smileatl">
      
      
        <link rel="canonical" href="https://smileatl.github.io/smileatlRepo/MyWork/SalCore/1.SalCore/">
      
      
      
      
      <link rel="icon" href="../../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.7">
    
    
      
        <title>1.SalCore - smileatlRepo</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#5severity-code-description-project-file-line-suppression-state-error-cmake-error-cmake-can-not-determine-linker-language-for-target-base_foss_core" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="smileatlRepo" class="md-header__button md-logo" aria-label="smileatlRepo" data-md-component="logo">
      
  <img src="../../../assets/website_icon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            smileatlRepo
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              1.SalCore
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/smileatl/smileatlRepo" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    smileatl/smileatlRepo
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../start_learning/" class="md-tabs__link">
          
  
  Get started

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../smileatlRepo/10.%E5%88%9D%E8%AF%86smileatlRepo/" class="md-tabs__link">
          
  
  项目

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../C/myC/10.myC/" class="md-tabs__link">
          
  
  工作

        </a>
      </li>
    
  

    
  

    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../%E5%AD%A6%E4%B9%A0/Postgraduate/00.publications/" class="md-tabs__link">
          
  
  学习

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../%E6%94%B6%E8%97%8F/05.%E4%B8%AA%E4%BA%BA%E6%94%B6%E8%97%8F%E5%A4%B9/" class="md-tabs__link">
          
  
  收藏

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../%E9%9A%8F%E7%AC%94/%E7%94%9F%E6%B4%BB%E9%9A%8F%E7%AC%94/%E5%88%9D%E8%AF%86%E7%94%9F%E6%B4%BB/" class="md-tabs__link">
          
  
  Blog

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../message/" class="md-tabs__link">
        
  
    
  
  留言

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="smileatlRepo" class="md-nav__button md-logo" aria-label="smileatlRepo" data-md-component="logo">
      
  <img src="../../../assets/website_icon.png" alt="logo">

    </a>
    smileatlRepo
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/smileatl/smileatlRepo" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    smileatl/smileatlRepo
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Get started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Get started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../start_learning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    网站指引
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    关于网站
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    项目
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            项目
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    smileatlRepo
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            smileatlRepo
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../smileatlRepo/10.%E5%88%9D%E8%AF%86smileatlRepo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    初识smileatlRepo
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Interview
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Interview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../smileatl_interview/10.cpp" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cpp
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../smileatl_interview/15.cpp%E5%85%B3%E9%94%AE%E5%AD%97/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cpp关键字
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../smileatl_interview/20.cpp_stl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cpp_stl
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../smileatl_interview/30.cpp%E6%96%B0%E7%89%B9%E6%80%A7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cpp新特性
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../smileatl_interview/40.cpp%E5%85%B6%E4%BB%96/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cpp其他
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../smileatl_interview/45.gcc_g%2B%2B_gdb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    gcc_g++_gdb
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../smileatl_interview/50.Linux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../smileatl_interview/60.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    操作系统
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../smileatl_interview/70.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E7%BD%91%E7%BB%9C%E7%B3%BB%E7%BB%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    操作系统-网络系统
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../smileatl_interview/80.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    操作系统-内存管理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../smileatl_interview/85.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E5%A4%9A%E7%BA%BF%E7%A8%8B_%E5%A4%9A%E8%BF%9B%E7%A8%8B_%E7%BA%BF%E7%A8%8B%E6%B1%A0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    操作系统-多线程_多进程_线程池
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../smileatl_interview/90.%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    计算机网络
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../smileatl_interview/100.%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据结构与算法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../smileatl_interview/110.MySQL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MySQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../smileatl_interview/115.Redis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../smileatl_interview/130.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    设计模式
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../smileatl_interview/140.%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    系统设计
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../smileatl_interview/150.%E5%B7%A5%E5%85%B7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    工具
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../smileatl_interview/190.%E6%8A%80%E6%9C%AF%E6%94%AF%E6%8C%81/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    技术支持
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../smileatl_interview/200.HR%E9%9D%A2%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HR面相关问题
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    工作
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            工作
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    编程语言
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            编程语言
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1_1" id="__nav_4_1_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    C
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_1">
            <span class="md-nav__icon md-icon"></span>
            C
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_1_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1_1_1" id="__nav_4_1_1_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    myC
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_1_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_1_1">
            <span class="md-nav__icon md-icon"></span>
            myC
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../C/myC/10.myC/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    myC
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../C/myC/20.gcc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    gcc
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../C/myC/50.%E5%AE%89%E8%A3%85/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    安装
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_1_2" >
        
          
          <label class="md-nav__link" for="__nav_4_1_1_2" id="__nav_4_1_1_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Book
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_1_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_1_2">
            <span class="md-nav__icon md-icon"></span>
            Book
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../C/Book/C%E8%AF%AD%E8%A8%80%E6%B7%B1%E5%BA%A6%E8%A7%A3%E5%89%96/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C语言深度解剖
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_1_3" >
        
          
          <label class="md-nav__link" for="__nav_4_1_1_3" id="__nav_4_1_1_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Lesson
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_1_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_1_3">
            <span class="md-nav__icon md-icon"></span>
            Lesson
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../C/Lesson/%E7%BF%81%E6%81%BAC%E8%AF%AD%E8%A8%80/C_wengkai/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    翁恺C语言
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_2" >
        
          
          <label class="md-nav__link" for="__nav_4_1_2" id="__nav_4_1_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cpp
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_2">
            <span class="md-nav__icon md-icon"></span>
            Cpp
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_2_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1_2_1" id="__nav_4_1_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    myCpp
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_1_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_2_1">
            <span class="md-nav__icon md-icon"></span>
            myCpp
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Cpp/myCpp/10.myCpp.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    myCpp
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Cpp/myCpp/20.STL.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    STL
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_2_2" >
        
          
          <label class="md-nav__link" for="__nav_4_1_2_2" id="__nav_4_1_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Lesson
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_1_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_2_2">
            <span class="md-nav__icon md-icon"></span>
            Lesson
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Cpp/myCpp/02.Cpp基础入门.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cpp基础入门
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Cpp/myCpp/03.Cpp核心编程.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cpp核心编程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Cpp/myCpp/04.Cpp提高编程.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cpp提高编程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_3" >
        
          
          <label class="md-nav__link" for="__nav_4_1_3" id="__nav_4_1_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Go
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_3">
            <span class="md-nav__icon md-icon"></span>
            Go
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_3_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1_3_1" id="__nav_4_1_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    myGo
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_1_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_3_1">
            <span class="md-nav__icon md-icon"></span>
            myGo
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Go/1.%E5%88%9D%E8%AF%86Go%E8%AF%AD%E8%A8%80/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    初识Go语言
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_4" >
        
          
          <label class="md-nav__link" for="__nav_4_1_4" id="__nav_4_1_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_4">
            <span class="md-nav__icon md-icon"></span>
            Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1_4_1" id="__nav_4_1_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    myPython
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_1_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_4_1">
            <span class="md-nav__icon md-icon"></span>
            myPython
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Python/myPython/Python基础.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python基础
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_5" >
        
          
          <label class="md-nav__link" for="__nav_4_1_5" id="__nav_4_1_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Script_Language
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_5">
            <span class="md-nav__icon md-icon"></span>
            Script_Language
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Script_Language/10.shell%E8%84%9A%E6%9C%AC/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    shell脚本
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Script_Language/20.slurm%E5%92%8Csbatch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    slurm和sbatch
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_6" >
        
          
          <label class="md-nav__link" for="__nav_4_1_6" id="__nav_4_1_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    YML
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_6">
            <span class="md-nav__icon md-icon"></span>
            YML
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../YML/yml/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    YML
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    计算机知识
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            计算机知识
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_1" >
        
          
          <label class="md-nav__link" for="__nav_4_2_1" id="__nav_4_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Linux
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_1">
            <span class="md-nav__icon md-icon"></span>
            Linux
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9F%A5%E8%AF%86/Linux/linux%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    linux系统基础
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2_2" id="__nav_4_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    操作系统
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_2">
            <span class="md-nav__icon md-icon"></span>
            操作系统
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9F%A5%E8%AF%86/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%9F%BA%E7%A1%80%E7%BC%96%E7%A8%8B/Linux%E7%B3%BB%E7%BB%9F%E5%87%BD%E6%95%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux基础编程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9F%A5%E8%AF%86/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/Linux%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux网络编程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9F%A5%E8%AF%86/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/%E8%BF%9B%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    进程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9F%A5%E8%AF%86/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/%E7%BA%BF%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    线程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9F%A5%E8%AF%86/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/%E4%BF%A1%E5%8F%B7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    信号
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_3" >
        
          
          <label class="md-nav__link" for="__nav_4_2_3" id="__nav_4_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    计算机网络
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_3">
            <span class="md-nav__icon md-icon"></span>
            计算机网络
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_3_1" >
        
          
          <label class="md-nav__link" for="__nav_4_2_3_1" id="__nav_4_2_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ICT技术
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_2_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_3_1">
            <span class="md-nav__icon md-icon"></span>
            ICT技术
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9F%A5%E8%AF%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/ICT%E6%8A%80%E6%9C%AF/%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    通信基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../计算机知识/计算机网络/ICT技术/交换机基础.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    交换机基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9F%A5%E8%AF%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/ICT%E6%8A%80%E6%9C%AF/%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    路由协议
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9F%A5%E8%AF%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/ICT%E6%8A%80%E6%9C%AF/NAT/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NAT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9F%A5%E8%AF%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/ICT%E6%8A%80%E6%9C%AF/ACL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ACL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9F%A5%E8%AF%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/ICT%E6%8A%80%E6%9C%AF/IPV6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IPV6
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_3_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2_3_2" id="__nav_4_2_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    NetworkProgramming
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_2_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_3_2">
            <span class="md-nav__icon md-icon"></span>
            NetworkProgramming
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9F%A5%E8%AF%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/NetworkProgramming/%E5%8D%8F%E8%AE%AE/http/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    http
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9F%A5%E8%AF%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/NetworkProgramming/%E5%8D%8F%E8%AE%AE/http%E8%A1%A5%E5%85%85%E9%97%AE%E9%A2%98/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    http补充问题
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9F%A5%E8%AF%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/NetworkProgramming/%E5%8D%8F%E8%AE%AE/websocket/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    websocket
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9F%A5%E8%AF%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/NetworkProgramming/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E5%B8%B8%E8%A7%81%E6%A6%82%E5%BF%B5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    网络编程常见概念
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_4" >
        
          
          <label class="md-nav__link" for="__nav_4_2_4" id="__nav_4_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    数据结构与算法
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_4">
            <span class="md-nav__icon md-icon"></span>
            数据结构与算法
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../计算机知识/数据结构与算法/数据结构与算法基础.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据结构与算法基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2_4_2" id="__nav_4_2_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    青大王卓
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_2_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_4_2">
            <span class="md-nav__icon md-icon"></span>
            青大王卓
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9F%A5%E8%AF%86/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%9D%92%E5%A4%A7%E7%8E%8B%E5%8D%93/10.%E7%BA%BF%E6%80%A7%E8%A1%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    线性表
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9F%A5%E8%AF%86/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%9D%92%E5%A4%A7%E7%8E%8B%E5%8D%93/20.%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    栈和队列
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9F%A5%E8%AF%86/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%9D%92%E5%A4%A7%E7%8E%8B%E5%8D%93/30.%E4%BA%8C%E5%8F%89%E6%A0%91/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    二叉树
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9F%A5%E8%AF%86/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%9D%92%E5%A4%A7%E7%8E%8B%E5%8D%93/40.%E5%9B%BE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    图
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9F%A5%E8%AF%86/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%9D%92%E5%A4%A7%E7%8E%8B%E5%8D%93/50.%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    查找算法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9F%A5%E8%AF%86/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%9D%92%E5%A4%A7%E7%8E%8B%E5%8D%93/60.%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    排序算法
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    工具
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            工具
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_1" >
        
          
          <label class="md-nav__link" for="__nav_4_3_1" id="__nav_4_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Git
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_1">
            <span class="md-nav__icon md-icon"></span>
            Git
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/Git/01.Git%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Git使用
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/Git/05.Git%E8%A1%A5%E5%85%85%E9%97%AE%E9%A2%98/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Git补充问题
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/Git/10.tortoiseGit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tortoiseGt
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_2" >
        
          
          <label class="md-nav__link" for="__nav_4_3_2" id="__nav_4_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Markdown
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_2">
            <span class="md-nav__icon md-icon"></span>
            Markdown
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/Markdown/markdown/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    markdown
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/Markdown/markdown常见问题.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    markdown常见问题
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3_3" id="__nav_4_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Obsidian
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_3">
            <span class="md-nav__icon md-icon"></span>
            Obsidian
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/Obsidian/obsidian/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    obsidian
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_4" >
        
          
          <label class="md-nav__link" for="__nav_4_3_4" id="__nav_4_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    SSH
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_4">
            <span class="md-nav__icon md-icon"></span>
            SSH
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/SSH/SSH/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SSH
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_5" >
        
          
          <label class="md-nav__link" for="__nav_4_3_5" id="__nav_4_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Vim
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_5">
            <span class="md-nav__icon md-icon"></span>
            Vim
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/Vim/vim/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vim
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/Vim/vim_%E9%BB%91%E9%A9%AC%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80%E7%BC%96%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vim_黑马
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_6" >
        
          
          <label class="md-nav__link" for="__nav_4_3_6" id="__nav_4_3_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    VisioStudio
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_6">
            <span class="md-nav__icon md-icon"></span>
            VisioStudio
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/VisioStudio/VisioStudio.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VisioStudio
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_7" >
        
          
          <label class="md-nav__link" for="__nav_4_3_7" id="__nav_4_3_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    VMware
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_7">
            <span class="md-nav__icon md-icon"></span>
            VMware
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/VMware/VMware/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VMware
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_8" >
        
          
          <label class="md-nav__link" for="__nav_4_3_8" id="__nav_4_3_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Vscode
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_8">
            <span class="md-nav__icon md-icon"></span>
            Vscode
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/Vscode/Vscode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vscode
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    其他
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            其他
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_4_1" id="__nav_4_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    刷题
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_1">
            <span class="md-nav__icon md-icon"></span>
            刷题
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%88%B7%E9%A2%98/02.Leetcode-%E6%95%B0%E7%BB%84/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数组
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%88%B7%E9%A2%98/04.Leetcode-%E5%AD%97%E7%AC%A6%E4%B8%B2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    字符串
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%88%B7%E9%A2%98/06.Leetcode-%E9%93%BE%E8%A1%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    链表
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%88%B7%E9%A2%98/08.Leetcode-%E5%93%88%E5%B8%8C%E8%A1%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    哈希表
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%88%B7%E9%A2%98/10.Leetcode-%E6%A0%88%E4%B8%8E%E9%98%9F%E5%88%97/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    栈与队列
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../刷题/12.Leetcode-树.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    树
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%88%B7%E9%A2%98/14.Leetcode-%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    贪心算法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%88%B7%E9%A2%98/15.Leetcode-%E9%80%92%E5%BD%92/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    递归
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%88%B7%E9%A2%98/16.Leetcode-%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    回溯算法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%88%B7%E9%A2%98/18.Leetcode-%E5%88%86%E6%B2%BB%E6%B3%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    分治法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%88%B7%E9%A2%98/20.Leetcode-%E6%90%9C%E7%B4%A2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    搜索
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%88%B7%E9%A2%98/22.Leetcode-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    动态规划
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%88%B7%E9%A2%98/24.Leetcode-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    二分查找
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%88%B7%E9%A2%98/26.Leetcode-%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    排序算法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%88%B7%E9%A2%98/28.Leetcode-%E5%8F%8C%E6%8C%87%E9%92%88/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    双指针
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%88%B7%E9%A2%98/30.Leetcode-%E6%95%B0%E5%AD%A6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数学
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%88%B7%E9%A2%98/32.Leetcode-%E5%85%B6%E4%BB%96%E7%AE%97%E6%B3%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    其他算法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../刷题/50.Leetcode-剑指offer.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    剑指offer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../刷题/60.Leetcode-ACM模式输入输出.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ACM模式输入输出
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../刷题/70.Leetcode-排序算法详解.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    排序算法详解
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../刷题/80.Leetcode-面试高频题-自己输入输出.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    面试高频题-自己输入输出
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../刷题/150.Leetcode-复刷还是没记住的题.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    复刷还是没记住的题
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    学习
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            学习
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Postgraduate
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            Postgraduate
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%AD%A6%E4%B9%A0/Postgraduate/00.publications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    publications
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%AD%A6%E4%B9%A0/Postgraduate/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9F%A5%E8%AF%86%E7%82%B9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    机器学习知识点
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%AD%A6%E4%B9%A0/Postgraduate/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Python%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/Python%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python深度学习
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    阅读
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            阅读
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%AD%A6%E4%B9%A0/%E9%98%85%E8%AF%BB/%E4%B9%A6%E6%91%98/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    个人摘抄
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    收藏
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            收藏
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%94%B6%E8%97%8F/05.%E4%B8%AA%E4%BA%BA%E6%94%B6%E8%97%8F%E5%A4%B9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    个人收藏夹
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%94%B6%E8%97%8F/10.%E8%B5%84%E6%BA%90%E4%B8%8B%E8%BD%BD/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    资源下载
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_1" >
        
          
          <label class="md-nav__link" for="__nav_7_1" id="__nav_7_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    生活随笔
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_1">
            <span class="md-nav__icon md-icon"></span>
            生活随笔
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%9A%8F%E7%AC%94/%E7%94%9F%E6%B4%BB%E9%9A%8F%E7%AC%94/%E5%88%9D%E8%AF%86%E7%94%9F%E6%B4%BB/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    初识生活
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    科技随笔
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            科技随笔
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%9A%8F%E7%AC%94/%E7%A7%91%E6%8A%80%E9%9A%8F%E7%AC%94/%E5%88%9D%E8%AF%86%E7%A7%91%E6%8A%80/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    初识科技
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../message/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    留言
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#5severity-code-description-project-file-line-suppression-state-error-cmake-error-cmake-can-not-determine-linker-language-for-target-base_foss_core" class="md-nav__link">
    <span class="md-ellipsis">
      5、Severity Code Description Project File Line Suppression State Error CMake Error: CMake can not determine linker language for target: base_foss_core
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10" class="md-nav__link">
    <span class="md-ellipsis">
      10、删除文件后的操作
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#15typedef-struct-base_directories-base_directories" class="md-nav__link">
    <span class="md-ellipsis">
      15、typedef struct base_directories base_directories的意义
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#20extern-c" class="md-nav__link">
    <span class="md-ellipsis">
      20、没加extern "C"，就都别加了，特殊需要再加
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#30freeswitchgitbash" class="md-nav__link">
    <span class="md-ellipsis">
      30、freeswitch之前之所以没编成功是因为git和bash没加到环境变量，导致下载库失败
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#35" class="md-nav__link">
    <span class="md-ellipsis">
      35、已下载了库，但是头文件找不到
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#40core_basehapr" class="md-nav__link">
    <span class="md-ellipsis">
      40、没办法在core_base模块的h文件包含apr库头文件的原因
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#45" class="md-nav__link">
    <span class="md-ellipsis">
      45、设置第三方库的产物路径
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#50" class="md-nav__link">
    <span class="md-ellipsis">
      50、引入第三方库
    </span>
  </a>
  
    <nav class="md-nav" aria-label="50、引入第三方库">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1. 手动配置路径
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. 手动配置路径">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      步骤
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-find_package" class="md-nav__link">
    <span class="md-ellipsis">
      2. 使用 find_package
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. 使用 find_package">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      步骤
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-externalproject-poco" class="md-nav__link">
    <span class="md-ellipsis">
      3. 使用 ExternalProject 下载和构建 Poco
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 使用 ExternalProject 下载和构建 Poco">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      步骤
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      示例项目结构
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apr" class="md-nav__link">
    <span class="md-ellipsis">
      apr库的修改
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#45_1" class="md-nav__link">
    <span class="md-ellipsis">
      45、为什么以下定义，即使没有包含头文件，也不会编译出错
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#50aprincludeinclude-apr" class="md-nav__link">
    <span class="md-ellipsis">
      50、但是我没办法把apr包含在头文件中呢，因为这个模块的头文件需要被其他工程include，而其它工程没有include apr库的头文件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="50、但是我没办法把apr包含在头文件中呢，因为这个模块的头文件需要被其他工程include，而其它工程没有include apr库的头文件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      以上前向声明，在某些场景下不是必须的
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#55baselib_apiapi" class="md-nav__link">
    <span class="md-ellipsis">
      55、出现BASELIB_API的问题时，检查函数定义和api格式是否相同
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#60unresolved-externalslnk2019-unresolved-external-symbol-__declspecdllimport-void-__cdecl-sayhellovoid-__imp_sayhelloyaxxz-referenced-in-function" class="md-nav__link">
    <span class="md-ellipsis">
      60、错误：unresolved externals，LNK2019 unresolved external symbol "__declspec(dllimport) void __cdecl sayHello(void)" (__imp_?sayHello@@YAXXZ) referenced in function
    </span>
  </a>
  
    <nav class="md-nav" aria-label="60、错误：unresolved externals，LNK2019 unresolved external symbol &#34;__declspec(dllimport) void __cdecl sayHello(void)&#34; (__imp_?sayHello@@YAXXZ) referenced in function">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      修正步骤
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#61bug" class="md-nav__link">
    <span class="md-ellipsis">
      61、当所有地方都对，还有链接不到的bug的时候
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#65ccpp" class="md-nav__link">
    <span class="md-ellipsis">
      65、C文件不能包含cpp相关的头文件
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#70" class="md-nav__link">
    <span class="md-ellipsis">
      70、前向声明
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7570" class="md-nav__link">
    <span class="md-ellipsis">
      75、针对70点前向声明的问题，可以使用组合替代继承
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#807075" class="md-nav__link">
    <span class="md-ellipsis">
      80、针对70与75点，还有解决办法，
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#90typedef-struct-apr_pool_t-apr_pool_ttypedef" class="md-nav__link">
    <span class="md-ellipsis">
      90、为什么有的时候typedef struct apr_pool_t apr_pool_t自己typedef成自己
    </span>
  </a>
  
    <nav class="md-nav" aria-label="90、为什么有的时候typedef struct apr_pool_t apr_pool_t自己typedef成自己">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      前向声明
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      简化类型名称
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      为什么要这样做？
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      例子
    </span>
  </a>
  
    <nav class="md-nav" aria-label="例子">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arrayh" class="md-nav__link">
    <span class="md-ellipsis">
      头文件 (array.h)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arrayc" class="md-nav__link">
    <span class="md-ellipsis">
      源文件 (array.c)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mainc" class="md-nav__link">
    <span class="md-ellipsis">
      使用示例 (main.c)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      我的补充
    </span>
  </a>
  
    <nav class="md-nav" aria-label="我的补充">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    <span class="md-ellipsis">
      情况1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      情况2
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#90" class="md-nav__link">
    <span class="md-ellipsis">
      90、在一个函数调用前莫名加::，什么作用
    </span>
  </a>
  
    <nav class="md-nav" aria-label="90、在一个函数调用前莫名加::，什么作用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      示例
    </span>
  </a>
  
    <nav class="md-nav" aria-label="示例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      不使用 ::
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      使用 ::
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      何时需要使用 ::
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      示例：命名冲突
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      总结
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#95" class="md-nav__link">
    <span class="md-ellipsis">
      95、使用动态库与静态库里东西的区别
    </span>
  </a>
  
    <nav class="md-nav" aria-label="95、使用动态库与静态库里东西的区别">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      动态库
    </span>
  </a>
  
    <nav class="md-nav" aria-label="动态库">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_2" class="md-nav__link">
    <span class="md-ellipsis">
      1.导出符号的限制
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2name-mangling" class="md-nav__link">
    <span class="md-ellipsis">
      2.名字修饰（Name Mangling）问题
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3.类的静态成员或全局变量问题
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      总结：
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      静态库
    </span>
  </a>
  
    <nav class="md-nav" aria-label="静态库">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_3" class="md-nav__link">
    <span class="md-ellipsis">
      1.静态库的基本工作方式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    <span class="md-ellipsis">
      2. 如何在其他模块中使用静态库中的类
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_1" class="md-nav__link">
    <span class="md-ellipsis">
      3.静态库中类的限制
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.静态库中类的限制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    <span class="md-ellipsis">
      3.1. 链接阶段的参与
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" class="md-nav__link">
    <span class="md-ellipsis">
      3.2. 静态库和全局状态
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" class="md-nav__link">
    <span class="md-ellipsis">
      3.3. 名字冲突
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      4. 总结：
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      什么时候静态库，什么时候动态库
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#100" class="md-nav__link">
    <span class="md-ellipsis">
      100、上层模块使用了这个静态库，静态库依赖于动态库，编译的时候是把静态库一起编译进上层模块的代码里，那动态库的代码呢
    </span>
  </a>
  
    <nav class="md-nav" aria-label="100、上层模块使用了这个静态库，静态库依赖于动态库，编译的时候是把静态库一起编译进上层模块的代码里，那动态库的代码呢">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_4" class="md-nav__link">
    <span class="md-ellipsis">
      1. 静态库的代码：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_2" class="md-nav__link">
    <span class="md-ellipsis">
      2. 动态库的代码：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_2" class="md-nav__link">
    <span class="md-ellipsis">
      3. 编译与链接的流程：
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 编译与链接的流程：">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      假设：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      编译和链接过程：
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_1" class="md-nav__link">
    <span class="md-ellipsis">
      4. 上层模块中的动态库处理：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    <span class="md-ellipsis">
      5. 注意事项：
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. 注意事项：">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      如果动态库版本发生变化：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      如果动态库缺失：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      调试与优化：
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      总结：
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#105" class="md-nav__link">
    <span class="md-ellipsis">
      105、有时候新加的模块没有编译起来
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#100private" class="md-nav__link">
    <span class="md-ellipsis">
      100、有时候将一个类的构造函数写成private
    </span>
  </a>
  
    <nav class="md-nav" aria-label="100、有时候将一个类的构造函数写成private">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_5" class="md-nav__link">
    <span class="md-ellipsis">
      1. 限制直接实例化
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_3" class="md-nav__link">
    <span class="md-ellipsis">
      2. 静态工厂方法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_3" class="md-nav__link">
    <span class="md-ellipsis">
      3. 控制销毁方式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_2" class="md-nav__link">
    <span class="md-ellipsis">
      4. 典型用途
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5_1" class="md-nav__link">
    <span class="md-ellipsis">
      5. 实例化限制的效果
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6" class="md-nav__link">
    <span class="md-ellipsis">
      6. 总结
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1050" class="md-nav__link">
    <span class="md-ellipsis">
      105、错误码一般怎么设置，负数、0、正数
    </span>
  </a>
  
    <nav class="md-nav" aria-label="105、错误码一般怎么设置，负数、0、正数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      常见的错误码约定
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#posix" class="md-nav__link">
    <span class="md-ellipsis">
      实例：POSIX 错误码设计
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      实际设计中的建议
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      示例代码
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      总结
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#110" class="md-nav__link">
    <span class="md-ellipsis">
      110、要使用动态库里的宏，不需要导出
    </span>
  </a>
  
    <nav class="md-nav" aria-label="110、要使用动态库里的宏，不需要导出">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_6" class="md-nav__link">
    <span class="md-ellipsis">
      1. 宏的本质
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_4" class="md-nav__link">
    <span class="md-ellipsis">
      2. 动态库导出的是函数或变量
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. 动态库导出的是函数或变量">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      宏定义（不会导出）：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      导出函数（需要导出）：
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_4" class="md-nav__link">
    <span class="md-ellipsis">
      3. 宏是否需要导出，取决于它的用途
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 宏是否需要导出，取决于它的用途">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_7" class="md-nav__link">
    <span class="md-ellipsis">
      情况 1：宏只在头文件中定义
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_5" class="md-nav__link">
    <span class="md-ellipsis">
      情况 2：宏依赖动态库中的符号
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      总结
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#115cmake-cache" class="md-nav__link">
    <span class="md-ellipsis">
      115、新模块建立时，生成cmake cache失败
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#120windowsexplib" class="md-nav__link">
    <span class="md-ellipsis">
      120、windows上，没有定义导出符号，没办法生成.exp和.lib文件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="120、windows上，没有定义导出符号，没办法生成.exp和.lib文件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exp" class="md-nav__link">
    <span class="md-ellipsis">
      .exp 文件的作用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exp_1" class="md-nav__link">
    <span class="md-ellipsis">
      .exp 文件的生成过程
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#125" class="md-nav__link">
    <span class="md-ellipsis">
      125、动态库的动态链接和动态库的静态链接有什么区别
    </span>
  </a>
  
    <nav class="md-nav" aria-label="125、动态库的动态链接和动态库的静态链接有什么区别">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      动态库的动态链接
    </span>
  </a>
  
    <nav class="md-nav" aria-label="动态库的动态链接">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      定义
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    <span class="md-ellipsis">
      工作原理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    <span class="md-ellipsis">
      特点
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    <span class="md-ellipsis">
      适用场景
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    <span class="md-ellipsis">
      动态库的静态链接
    </span>
  </a>
  
    <nav class="md-nav" aria-label="动态库的静态链接">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    <span class="md-ellipsis">
      定义
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    <span class="md-ellipsis">
      工作原理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    <span class="md-ellipsis">
      特点
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    <span class="md-ellipsis">
      适用场景
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_45" class="md-nav__link">
    <span class="md-ellipsis">
      对比总结
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_46" class="md-nav__link">
    <span class="md-ellipsis">
      结论
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#125base_typeshbase_pluginhccc" class="md-nav__link">
    <span class="md-ellipsis">
      125、base_types.h和base_plugin.h这两个其他模块（包括C和C++）需要频繁使用的东西，被我弄成了纯C代码
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_47" class="md-nav__link">
    <span class="md-ellipsis">
      待解决疑问点
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apr_1" class="md-nav__link">
    <span class="md-ellipsis">
      apr库的修改
    </span>
  </a>
  
    <nav class="md-nav" aria-label="apr库的修改">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tmp" class="md-nav__link">
    <span class="md-ellipsis">
      tmp
    </span>
  </a>
  
    <nav class="md-nav" aria-label="tmp">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_8" class="md-nav__link">
    <span class="md-ellipsis">
      1. 定义核心模块接口
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_6" class="md-nav__link">
    <span class="md-ellipsis">
      2. 实现核心模块
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_5" class="md-nav__link">
    <span class="md-ellipsis">
      3. 定义插件接口
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_3" class="md-nav__link">
    <span class="md-ellipsis">
      4. 实现第一个插件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5_2" class="md-nav__link">
    <span class="md-ellipsis">
      5. 实现第二个插件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6_1" class="md-nav__link">
    <span class="md-ellipsis">
      6. 实现插件框架
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7" class="md-nav__link">
    <span class="md-ellipsis">
      7. 编写主程序
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8" class="md-nav__link">
    <span class="md-ellipsis">
      8. 编译和运行
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_48" class="md-nav__link">
    <span class="md-ellipsis">
      总结
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tmp2" class="md-nav__link">
    <span class="md-ellipsis">
      tmp2
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#poco-tmp" class="md-nav__link">
    <span class="md-ellipsis">
      poco-tmp
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/smileatl/smileatlRepo/edit/master/docs/MyWork/SalCore/1.SalCore.md" title="编辑此页" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/smileatl/smileatlRepo/raw/master/docs/MyWork/SalCore/1.SalCore.md" title="查看本页的源代码" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h2 id="5severity-code-description-project-file-line-suppression-state-error-cmake-error-cmake-can-not-determine-linker-language-for-target-base_foss_core">5、Severity Code Description Project File Line Suppression State Error CMake Error: CMake can not determine linker language for target: base_foss_core<a class="headerlink" href="#5severity-code-description-project-file-line-suppression-state-error-cmake-error-cmake-can-not-determine-linker-language-for-target-base_foss_core" title="Permanent link">&para;</a></h2>
<p>生成文件时没有相应c/cpp文件的链接</p>
<h2 id="10">10、删除文件后的操作<a class="headerlink" href="#10" title="Permanent link">&para;</a></h2>
<p>删除文件后，要去相应的cmake文件把文件引用删除掉</p>
<h2 id="15typedef-struct-base_directories-base_directories">15、typedef struct base_directories base_directories的意义<a class="headerlink" href="#15typedef-struct-base_directories-base_directories" title="Permanent link">&para;</a></h2>
<p><strong>简化类型声明</strong>：在C语言中，定义结构体时，需要用关键字<code>struct</code>。使用<code>typedef</code>后，可以直接用新名字代替<code>struct</code>关键字。</p>
<p><strong>提高可维护性</strong>：如果需要更改结构体的名字，只需更改<code>typedef</code>定义即可，而不用修改所有相关代码。</p>
<p>通过<code>typedef</code>，你可以直接使用<code>base_directories</code>和<code>base_filenames</code>，而不需要每次都使用<code>struct</code>关键字。</p>
<h2 id="20extern-c">20、没加extern "C"，就都别加了，特殊需要再加<a class="headerlink" href="#20extern-c" title="Permanent link">&para;</a></h2>
<p>测试</p>
<h2 id="30freeswitchgitbash">30、freeswitch之前之所以没编成功是因为git和bash没加到环境变量，导致下载库失败<a class="headerlink" href="#30freeswitchgitbash" title="Permanent link">&para;</a></h2>
<h2 id="35">35、已下载了库，但是头文件找不到<a class="headerlink" href="#35" title="Permanent link">&para;</a></h2>
<p>这是因为下载的库有很多后缀</p>
<h2 id="40core_basehapr">40、没办法在core_base模块的h文件包含apr库头文件的原因<a class="headerlink" href="#40core_basehapr" title="Permanent link">&para;</a></h2>
<p>因为我会在core_main.c文件中包含base.h头文件，然后base.h文件就会在core_main模块展开，此时base.h文件中所包含的那些头文件中如果有文件中包含了apr库的头文件，那么因为core_main模块并没有去include apr库的头文件，就出现了找不到头文件的情况。（对于core_base模块的c文件没有影响）</p>
<p>两种解决办法：</p>
<ol>
<li>不要在core_base模块的h文件include apr库的头文件，而是在core_base模块的c文件需要用到apr库的时候，include对应的apr库头文件（该框架所采用的方法）</li>
<li>在core_main模块的cmake文件去include_directories apr库的头文件路径（我觉得不合适，因为不希望core_main再去额外包含apr库的文件路径了）</li>
</ol>
<h2 id="45">45、设置第三方库的产物路径<a class="headerlink" href="#45" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.15.0</span><span class="p">)</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="nb">project</span><span class="p">(</span><span class="s">Poco</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="nb">set</span><span class="p">(</span><span class="s">LIBRARY_OUTPUT_PATH</span><span class="w"> </span><span class="o">${</span><span class="nv">base_srcdir</span><span class="o">}</span><span class="s">/out</span><span class="p">)</span>
</code></pre></div>
<h2 id="50">50、引入第三方库<a class="headerlink" href="#50" title="Permanent link">&para;</a></h2>
<p>将 Poco 库引入到您的 CMake 工程中可以通过以下几种方式实现：手动配置路径、使用 <code>find_package</code>、或者通过 <code>ExternalProject</code> 下载和构建。以下是引入 Poco 库的详细步骤。</p>
<h3 id="1">1. 手动配置路径<a class="headerlink" href="#1" title="Permanent link">&para;</a></h3>
<p>如果您已经下载并编译好了 Poco 库，可以手动配置头文件路径和库文件路径。</p>
<h4 id="_1">步骤<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h4>
<ol>
<li><strong>下载并编译 Poco 库</strong>（如果尚未完成）：</li>
</ol>
<p>访问 <a href="https://pocoproject.org/">Poco 官方网站</a> 下载源代码，或者使用 Git 克隆仓库：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/pocoproject/poco.git
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nb">cd</span><span class="w"> </span>poco
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>mkdir<span class="w"> </span>cmake-build
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="nb">cd</span><span class="w"> </span>cmake-build
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>cmake<span class="w"> </span>..
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w"> </span>--config<span class="w"> </span>Release
</code></pre></div>
<ol>
<li><strong>配置头文件和库文件路径</strong>：</li>
</ol>
<p>修改您的 <code>CMakeLists.txt</code> 文件，添加 Poco 库的头文件路径和库文件路径。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.8</span><span class="p">)</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="nb">project</span><span class="p">(</span><span class="s">SalCore</span><span class="p">)</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="c"># 设置项目基础路径</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="nb">set</span><span class="p">(</span><span class="s">base_srcdir</span><span class="w"> </span><span class="o">${</span><span class="nv">PROJECT_SOURCE_DIR</span><span class="o">}</span><span class="p">)</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="c"># 设置 Poco 库路径</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="nb">set</span><span class="p">(</span><span class="s">POCO_INCLUDE_DIR</span><span class="w"> </span><span class="o">${</span><span class="nv">base_srcdir</span><span class="o">}</span><span class="s">/thirdparty/poco/include</span><span class="p">)</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="nb">set</span><span class="p">(</span><span class="s">POCO_LIB_DIR</span><span class="w"> </span><span class="o">${</span><span class="nv">base_srcdir</span><span class="o">}</span><span class="s">/thirdparty/poco/lib</span><span class="p">)</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="c"># 包含头文件路径</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="nb">include_directories</span><span class="p">(</span><span class="o">${</span><span class="nv">POCO_INCLUDE_DIR</span><span class="o">}</span><span class="p">)</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="c"># 链接库文件路径</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="nb">link_directories</span><span class="p">(</span><span class="o">${</span><span class="nv">POCO_LIB_DIR</span><span class="o">}</span><span class="p">)</span>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="c"># 添加子目录</span>
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="nb">add_subdirectory</span><span class="p">(</span><span class="s">core_base</span><span class="p">)</span>
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="nb">add_subdirectory</span><span class="p">(</span><span class="s">core_main</span><span class="p">)</span>
</code></pre></div>
<ol>
<li><strong>链接 Poco 库</strong>：</li>
</ol>
<p>在需要使用 Poco 库的目标中，添加链接库。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c"># core_main/CMakeLists.txt</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.8</span><span class="p">)</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="nb">project</span><span class="p">(</span><span class="s">core_main</span><span class="p">)</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="c"># 库生成路径</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="nb">set</span><span class="p">(</span><span class="s">EXECUTABLE_OUTPUT_DIRECTORY</span><span class="w"> </span><span class="o">${</span><span class="nv">base_srcdir</span><span class="o">}</span><span class="s">/out</span><span class="p">)</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="c"># 头文件</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="nb">target_include_directories</span><span class="p">(</span><span class="s">core_main</span><span class="w"> </span><span class="s">PRIVATE</span><span class="w"> </span><span class="o">${</span><span class="nv">base_srcdir</span><span class="o">}</span><span class="s">/core_main/include</span><span class="p">)</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="nb">target_include_directories</span><span class="p">(</span><span class="s">core_main</span><span class="w"> </span><span class="s">PRIVATE</span><span class="w"> </span><span class="o">${</span><span class="nv">base_srcdir</span><span class="o">}</span><span class="s">/core_base/include</span><span class="p">)</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="c"># 源文件</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="nb">file</span><span class="p">(</span><span class="s">GLOB_RECURSE</span><span class="w"> </span><span class="s">SOURCE_HEAD</span><span class="w"> </span><span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/include/*.h</span><span class="p">)</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="nb">aux_source_directory</span><span class="p">(</span><span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/src</span><span class="w"> </span><span class="s">SOURCE_SRC</span><span class="p">)</span>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="c"># 生成可执行文件</span>
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="nb">add_executable</span><span class="p">(</span><span class="s">core_main</span><span class="w"> </span><span class="o">${</span><span class="nv">SOURCE_SRC</span><span class="o">}</span><span class="w"> </span><span class="o">${</span><span class="nv">SOURCE_HEAD</span><span class="o">}</span><span class="p">)</span>
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a>
<a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a><span class="c"># 链接 Poco 库</span>
<a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a><span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">core_main</span><span class="w"> </span><span class="s">PRIVATE</span><span class="w"> </span><span class="s">core_base</span><span class="w"> </span><span class="s">PocoFoundation</span><span class="w"> </span><span class="s">PocoNet</span><span class="w"> </span><span class="s">PocoUtil</span><span class="p">)</span>
</code></pre></div>
<h3 id="2-find_package">2. 使用 <code>find_package</code><a class="headerlink" href="#2-find_package" title="Permanent link">&para;</a></h3>
<p>Poco 库支持 CMake 的 <code>find_package</code> 命令，这使得引入库更加简洁和自动化。</p>
<h4 id="_2">步骤<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h4>
<ol>
<li>
<p><strong>确保 Poco 库安装在系统路径中</strong>，或者设置 <code>CMAKE_PREFIX_PATH</code> 指向 Poco 库的安装路径。</p>
</li>
<li>
<p><strong>在 CMakeLists.txt 文件中使用 <code>find_package</code></strong>：</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.8</span><span class="p">)</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="nb">project</span><span class="p">(</span><span class="s">SalCore</span><span class="p">)</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="c"># 设置项目基础路径</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="nb">set</span><span class="p">(</span><span class="s">base_srcdir</span><span class="w"> </span><span class="o">${</span><span class="nv">PROJECT_SOURCE_DIR</span><span class="o">}</span><span class="p">)</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="c"># 找到 Poco 库</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="nb">find_package</span><span class="p">(</span><span class="s">Poco</span><span class="w"> </span><span class="s">REQUIRED</span><span class="w"> </span><span class="s">COMPONENTS</span><span class="w"> </span><span class="s">Foundation</span><span class="w"> </span><span class="s">Net</span><span class="w"> </span><span class="s">Util</span><span class="p">)</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="c"># 包含头文件路径</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="nb">include_directories</span><span class="p">(</span><span class="o">${</span><span class="nv">Poco_INCLUDE_DIRS</span><span class="o">}</span><span class="p">)</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="c"># 添加子目录</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="nb">add_subdirectory</span><span class="p">(</span><span class="s">core_base</span><span class="p">)</span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="nb">add_subdirectory</span><span class="p">(</span><span class="s">core_main</span><span class="p">)</span>
</code></pre></div>
<ol>
<li><strong>链接 Poco 库</strong>：</li>
</ol>
<p>在需要使用 Poco 库的目标中，添加链接库。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c"># core_main/CMakeLists.txt</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.8</span><span class="p">)</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="nb">project</span><span class="p">(</span><span class="s">core_main</span><span class="p">)</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="c"># 库生成路径</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="nb">set</span><span class="p">(</span><span class="s">EXECUTABLE_OUTPUT_DIRECTORY</span><span class="w"> </span><span class="o">${</span><span class="nv">base_srcdir</span><span class="o">}</span><span class="s">/out</span><span class="p">)</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="c"># 头文件</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="nb">target_include_directories</span><span class="p">(</span><span class="s">core_main</span><span class="w"> </span><span class="s">PRIVATE</span><span class="w"> </span><span class="o">${</span><span class="nv">base_srcdir</span><span class="o">}</span><span class="s">/core_main/include</span><span class="p">)</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="nb">target_include_directories</span><span class="p">(</span><span class="s">core_main</span><span class="w"> </span><span class="s">PRIVATE</span><span class="w"> </span><span class="o">${</span><span class="nv">base_srcdir</span><span class="o">}</span><span class="s">/core_base/include</span><span class="p">)</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="c"># 源文件</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="nb">file</span><span class="p">(</span><span class="s">GLOB_RECURSE</span><span class="w"> </span><span class="s">SOURCE_HEAD</span><span class="w"> </span><span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/include/*.h</span><span class="p">)</span>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="nb">aux_source_directory</span><span class="p">(</span><span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/src</span><span class="w"> </span><span class="s">SOURCE_SRC</span><span class="p">)</span>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="c"># 生成可执行文件</span>
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="nb">add_executable</span><span class="p">(</span><span class="s">core_main</span><span class="w"> </span><span class="o">${</span><span class="nv">SOURCE_SRC</span><span class="o">}</span><span class="w"> </span><span class="o">${</span><span class="nv">SOURCE_HEAD</span><span class="o">}</span><span class="p">)</span>
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a>
<a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a><span class="c"># 链接 Poco 库</span>
<a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a><span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">core_main</span><span class="w"> </span><span class="s">PRIVATE</span><span class="w"> </span><span class="s">core_base</span><span class="w"> </span><span class="s">Poco::Foundation</span><span class="w"> </span><span class="s">Poco::Net</span><span class="w"> </span><span class="s">Poco::Util</span><span class="p">)</span>
</code></pre></div>
<h3 id="3-externalproject-poco">3. 使用 <code>ExternalProject</code> 下载和构建 Poco<a class="headerlink" href="#3-externalproject-poco" title="Permanent link">&para;</a></h3>
<p>如果您希望在构建过程中自动下载和构建 Poco 库，可以使用 CMake 的 <code>ExternalProject</code> 模块。</p>
<h4 id="_3">步骤<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h4>
<ol>
<li><strong>在 CMakeLists.txt 文件中添加 <code>ExternalProject</code> 配置</strong>：</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.8</span><span class="p">)</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="nb">project</span><span class="p">(</span><span class="s">SalCore</span><span class="p">)</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="nb">include</span><span class="p">(</span><span class="s">ExternalProject</span><span class="p">)</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="c"># 设置项目基础路径</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="nb">set</span><span class="p">(</span><span class="s">base_srcdir</span><span class="w"> </span><span class="o">${</span><span class="nv">PROJECT_SOURCE_DIR</span><span class="o">}</span><span class="p">)</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="c"># 下载并构建 Poco 库</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="nb">ExternalProject_Add</span><span class="p">(</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="w">    </span><span class="s">Poco</span>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="w">    </span><span class="s">GIT_REPOSITORY</span><span class="w"> </span><span class="s">https://github.com/pocoproject/poco.git</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="w">    </span><span class="s">GIT_TAG</span><span class="w"> </span><span class="s">master</span>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="w">    </span><span class="s">CMAKE_ARGS</span><span class="w"> </span><span class="s">-DCMAKE_INSTALL_PREFIX=</span><span class="o">${</span><span class="nv">base_srcdir</span><span class="o">}</span><span class="s">/thirdparty/poco</span>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="w">    </span><span class="s">UPDATE_DISCONNECTED</span><span class="w"> </span><span class="s">1</span>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="p">)</span>
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a><span class="c"># 包含头文件路径</span>
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a><span class="nb">include_directories</span><span class="p">(</span><span class="o">${</span><span class="nv">base_srcdir</span><span class="o">}</span><span class="s">/thirdparty/poco/include</span><span class="p">)</span>
<a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a>
<a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a><span class="c"># 链接库文件路径</span>
<a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a><span class="nb">link_directories</span><span class="p">(</span><span class="o">${</span><span class="nv">base_srcdir</span><span class="o">}</span><span class="s">/thirdparty/poco/lib</span><span class="p">)</span>
<a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a>
<a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a><span class="c"># 添加子目录</span>
<a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a><span class="nb">add_subdirectory</span><span class="p">(</span><span class="s">core_base</span><span class="p">)</span>
<a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a><span class="nb">add_subdirectory</span><span class="p">(</span><span class="s">core_main</span><span class="p">)</span>
</code></pre></div>
<ol>
<li><strong>确保在需要使用 Poco 库的目标中添加依赖</strong>：</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c"># core_main/CMakeLists.txt</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.8</span><span class="p">)</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="nb">project</span><span class="p">(</span><span class="s">core_main</span><span class="p">)</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="c"># 库生成路径</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="nb">set</span><span class="p">(</span><span class="s">EXECUTABLE_OUTPUT_DIRECTORY</span><span class="w"> </span><span class="o">${</span><span class="nv">base_srcdir</span><span class="o">}</span><span class="s">/out</span><span class="p">)</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="c"># 头文件</span>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="nb">target_include_directories</span><span class="p">(</span><span class="s">core_main</span><span class="w"> </span><span class="s">PRIVATE</span><span class="w"> </span><span class="o">${</span><span class="nv">base_srcdir</span><span class="o">}</span><span class="s">/core_main/include</span><span class="p">)</span>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="nb">target_include_directories</span><span class="p">(</span><span class="s">core_main</span><span class="w"> </span><span class="s">PRIVATE</span><span class="w"> </span><span class="o">${</span><span class="nv">base_srcdir</span><span class="o">}</span><span class="s">/core_base/include</span><span class="p">)</span>
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="c"># 源文件</span>
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="nb">file</span><span class="p">(</span><span class="s">GLOB_RECURSE</span><span class="w"> </span><span class="s">SOURCE_HEAD</span><span class="w"> </span><span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/include/*.h</span><span class="p">)</span>
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="nb">aux_source_directory</span><span class="p">(</span><span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="s">/src</span><span class="w"> </span><span class="s">SOURCE_SRC</span><span class="p">)</span>
<a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>
<a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a><span class="c"># 生成可执行文件</span>
<a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a><span class="nb">add_executable</span><span class="p">(</span><span class="s">core_main</span><span class="w"> </span><span class="o">${</span><span class="nv">SOURCE_SRC</span><span class="o">}</span><span class="w"> </span><span class="o">${</span><span class="nv">SOURCE_HEAD</span><span class="o">}</span><span class="p">)</span>
<a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a>
<a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a><span class="c"># 添加依赖</span>
<a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a><span class="nb">add_dependencies</span><span class="p">(</span><span class="s">core_main</span><span class="w"> </span><span class="s">Poco</span><span class="p">)</span>
<a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a>
<a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a><span class="c"># 链接 Poco 库</span>
<a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a><span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">core_main</span><span class="w"> </span><span class="s">PRIVATE</span><span class="w"> </span><span class="s">core_base</span><span class="w"> </span><span class="s">PocoFoundation</span><span class="w"> </span><span class="s">PocoNet</span><span class="w"> </span><span class="s">PocoUtil</span><span class="p">)</span>
</code></pre></div>
<h3 id="_4">示例项目结构<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>确保您的项目结构清晰，并且各个模块的 <code>CMakeLists.txt</code> 文件配置正确：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>SalCore/
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>├── CMakeLists.txt
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>├── core_base/
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>│   ├── CMakeLists.txt
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>│   ├── include/
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>│   │   └── *.h
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>│   └── src/
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>│       └── *.cpp
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>├── core_main/
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>│   └── CMakeLists.txt
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>├── thirdparty/
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>│   └── poco/
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>│       ├── CMakeLists.txt
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>│       ├── include/
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a>│       │   └── *.h
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a>│       └── src/
<a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a>│           └── *.cpp
<a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a>└── thirdparty_sal/
<a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a>    └── ...
</code></pre></div>
<p>通过上述步骤，您应该能够成功将 Poco 库引入到您的 CMake 工程中。选择适合您的方式，并确保路径和依赖关系配置正确。</p>
<h2 id="apr">apr库的修改<a class="headerlink" href="#apr" title="Permanent link">&para;</a></h2>
<h2 id="45_1">45、为什么以下定义，即使没有包含头文件，也不会编译出错<a class="headerlink" href="#45_1" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="cp">#ifndef BASE_PLUGIN_H</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="cp">#define BASE_PLUGIN_H</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="c1">//#include &lt;apr_general.h&gt;</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">apr_thread_mutex_t</span><span class="w"> </span><span class="n">base_mutex_t</span><span class="p">;</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="cp">#endif </span><span class="c1">// BASE_PLUGIN_H</span>
</code></pre></div>
<p>为了理解为什么这种定义不会导致编译错误，我们需要了解几个关键点：</p>
<ol>
<li><strong>预处理指令</strong>：<code>#ifndef BASE_PLUGIN_H</code> 和 <code>#define BASE_PLUGIN_H</code> 是预处理指令，用于防止头文件被多次包含。它们确保了 <code>BASE_PLUGIN_H</code> 只会被定义一次，从而避免重复包含引起的编译错误。</li>
<li><strong>注释掉的包含指令</strong>：<code>//#include &lt;apr_general.h&gt;</code> 被注释掉了，所以它不会对编译产生任何影响。</li>
<li><strong>类型定义</strong>：<code>typedef struct apr_thread_mutex_t base_mutex_t;</code> 是一个类型定义，它声明了一个名为 <code>base_mutex_t</code> 的类型，这个类型是 <code>struct apr_thread_mutex_t</code> 的别名。即使 <code>apr_thread_mutex_t</code> 这个结构体在这个头文件中未定义，编译器也不会报错，因为它只是声明了一个类型别名，而不是使用这个类型实例化任何变量。</li>
</ol>
<p>简而言之，这段代码不会导致编译错误的原因是：</p>
<ul>
<li>预处理指令用于防止头文件的重复包含。</li>
<li>被注释掉的包含指令不会对代码产生任何影响。</li>
<li>类型定义本身是有效的，即使 <code>apr_thread_mutex_t</code> 未定义，因为它只是声明了一个别名。</li>
</ul>
<h2 id="50aprincludeinclude-apr">50、但是我没办法把apr包含在头文件中呢，因为这个模块的头文件需要被其他工程include，而其它工程没有include apr库的头文件<a class="headerlink" href="#50aprincludeinclude-apr" title="Permanent link">&para;</a></h2>
<p>在这种情况下，你可以采用前向声明（forward declaration）来解决问题。前向声明允许你在不包含具体定义的情况下声明一个类型。这种方法适合在头文件中声明类型，并在源文件中包含实际的库头文件。</p>
<p>具体实现步骤如下：</p>
<ol>
<li>在头文件中使用前向声明：</li>
<li>声明 <code>apr_thread_mutex_t</code> 类型的前向声明。</li>
<li>定义 <code>switch_mutex_t</code> 类型。</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="cp">#ifndef BASE_PLUGIN_H</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="cp">#define BASE_PLUGIN_H</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="c1">// Forward declaration of apr_thread_mutex_t</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="k">struct</span><span class="w"> </span><span class="nc">apr_thread_mutex_t</span><span class="p">;</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="c1">// Define switch_mutex_t as a typedef of apr_thread_mutex_t</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">apr_thread_mutex_t</span><span class="w"> </span><span class="n">switch_mutex_t</span><span class="p">;</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="cp">#endif </span><span class="c1">// BASE_PLUGIN_H</span>
</code></pre></div>
<ol>
<li>在源文件中包含实际的库头文件：</li>
<li>在需要使用 <code>switch_mutex_t</code> 类型的源文件中包含 <code>apr_general.h</code> 头文件。</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;base_plugin.h&quot;</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;apr_general.h&gt;</span><span class="c1"> // Include the actual definition of apr_thread_mutex_t</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="w">    </span><span class="n">switch_mutex_t</span><span class="o">*</span><span class="w"> </span><span class="n">my_mutex</span><span class="p">;</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="w">    </span><span class="c1">// Initialize and use my_mutex here</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="p">}</span>
</code></pre></div>
<p>通过这种方式，你可以在头文件中声明 <code>switch_mutex_t</code> 类型，而不需要包含实际的库头文件。这确保了你的模块头文件可以被其他工程包含，而不依赖于 <code>apr</code> 库的头文件。</p>
<p>这种方法确保了模块的可移植性和灵活性，同时避免了编译错误。</p>
<h3 id="_5">以上前向声明，在某些场景下不是必须的<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p>如果你只是声明一个类型别名，而不会在头文件中定义或使用这个类型的任何实例，那么你可以直接使用 <code>typedef</code> 而不需要前向声明。例如：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="cp">#ifndef BASE_PLUGIN_H</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="cp">#define BASE_PLUGIN_H</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="c1">// Define switch_mutex_t as a typedef of apr_thread_mutex_t</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">apr_thread_mutex_t</span><span class="w"> </span><span class="n">switch_mutex_t</span><span class="p">;</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="cp">#endif </span><span class="c1">// BASE_PLUGIN_H</span>
</code></pre></div>
<p>这段代码是完全有效的，因为它只是定义了一个类型别名 <code>switch_mutex_t</code>，而没有尝试实例化任何 <code>apr_thread_mutex_t</code> 类型的变量。</p>
<p><strong>如果你只是声明一个类型别名，而不会在头文件中实例化该类型的变量或将其用作结构体成员（函数参数是可以的），那么你不需要前向声明</strong>。然而，如果你在头文件中需要使用该类型，那么前向声明是必要的。</p>
<h2 id="55baselib_apiapi">55、出现BASELIB_API的问题时，检查函数定义和api格式是否相同<a class="headerlink" href="#55baselib_apiapi" title="Permanent link">&para;</a></h2>
<h2 id="60unresolved-externalslnk2019-unresolved-external-symbol-__declspecdllimport-void-__cdecl-sayhellovoid-__imp_sayhelloyaxxz-referenced-in-function">60、错误：<code>unresolved externals，LNK2019  unresolved external symbol "__declspec(dllimport) void __cdecl sayHello(void)" (__imp_?sayHello@@YAXXZ) referenced in function</code><a class="headerlink" href="#60unresolved-externalslnk2019-unresolved-external-symbol-__declspecdllimport-void-__cdecl-sayhellovoid-__imp_sayhelloyaxxz-referenced-in-function" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>在.c文件里就是可以直接用，在.cpp文件里会出现
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>Severity    Code    Description Project File    Line    Suppression State
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>Error   LNK1120 1 unresolved externals  E:\MyWork\Backup\SalCore\src\out\build\x64-Debug\src    E:\MyWork\Backup\SalCore\src\out\core_main.exe  1   
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>Severity    Code    Description Project File    Line    Suppression State
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>Error   LNK2019 unresolved external symbol &quot;__declspec(dllimport) void __cdecl sayHello(void)&quot; (__imp_?sayHello@@YAXXZ) referenced in function main E:\MyWork\Backup\SalCore\src\out\build\x64-Debug\src    E:\MyWork\Backup\SalCore\src\out\build\x64-Debug\core_main.cpp.obj  1   
</code></pre></div>
<p>现这种情况的原因通常是由于 C 和 C++ 的名称修饰（name mangling）不同。C++ 编译器会对函数名称进行修饰，而 C 编译器不会。因此，当你在 C++ 文件中引用 C 函数时，需要使用 <code>extern "C"</code> 来告诉编译器这些函数是按照 C 的方式进行链接的。</p>
<h3 id="_6">修正步骤<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>确保头文件使用了 <code>extern "C"</code></strong>：</li>
<li>在你定义 <code>sayHello</code> 函数声明的头文件中，使用 <code>extern "C"</code> 来告诉 C++ 编译器这是一个 C 函数。</li>
</ol>
<h2 id="61bug">61、当所有地方都对，还有链接不到的bug的时候<a class="headerlink" href="#61bug" title="Permanent link">&para;</a></h2>
<ol>
<li>出现时可以检查该不该加extern "C"；都加或者都不加</li>
<li>还可以去base.h文件看一看，自己新增定义的头文件是否有include</li>
</ol>
<h2 id="65ccpp">65、C文件不能包含cpp相关的头文件<a class="headerlink" href="#65ccpp" title="Permanent link">&para;</a></h2>
<h2 id="70">70、前向声明<a class="headerlink" href="#70" title="Permanent link">&para;</a></h2>
<p>C++的类可以进行前向声明。但是，仅仅进行前向声明而没有定义的类是不完整的，这样的类，<strong>只能用于定义指针、引用、以及用于函数形参的指针和引用（函数声明的形参本身也可以，因为声明时也不需要知道该形参本身的大小）。</strong>
而不能定义对象(因为此时编译器只知道这是个类，还不知道这个类的大小有多大)，也不能访问类的对象，任何形式的访问都不允许(因为此时根本不知道有些什么成员，继承就更不行了)。等到类正式定义以后，就可以以各种方式使用该类了。</p>
<h2 id="7570">75、针对70点前向声明的问题，可以使用组合替代继承<a class="headerlink" href="#7570" title="Permanent link">&para;</a></h2>
<p>在C++中，要实现一个结构体继承另一个类或结构体，并且避免暴露底层库的实现细节，我们可以采用组合（composition）的方式，而不是继承。组合允许我们在类中包含另一个类的实例，而不需要知道被包含类的具体实现。</p>
<p>我们可以通过组合的方式，将 <code>base_finfo_t</code> 指针包含在 <code>Entry</code> 结构体中，而不是直接继承它。这可以避免在头文件中暴露实现细节，并且仍然能够使用 <code>base_finfo_t</code> 的功能。</p>
<h2 id="807075">80、针对70与75点，还有解决办法，<a class="headerlink" href="#807075" title="Permanent link">&para;</a></h2>
<ol>
<li>就是头文件仅声明，定义放到源文件，这样源文件就可以include apr库了（这种也只能指针，因为不知道对象的定义）</li>
<li>头文件去typedef成 <code>base_</code> 开头的自定义类型，源文件直接去include apr库使用（只能指针，因为不知道对象的定义，尽量减少无效的重定义）</li>
<li><code>typedef struct apr_pool_t apr_pool_t</code>或自己typedef成自己（同第2点，能否指针或对象看90点，看具体定义在哪里）</li>
</ol>
<p>注意：以上提到在头文件typedef，只能针对apr库中struct结构体；想typedef apr_int32_t这些东西就不行，因为其他模块包含该头文件时，就需要知道这些整型类型的定义了。像这种整型、字符型等就不要嫌麻烦了，如下自己定义：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="k">typedef</span><span class="w"> </span><span class="kt">int32_t</span><span class="w">         </span><span class="n">base_int32_t</span><span class="p">;</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="k">typedef</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w">        </span><span class="n">base_uint32_t</span><span class="p">;</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="k">typedef</span><span class="w"> </span><span class="kt">size_t</span><span class="w">          </span><span class="n">base_size_t</span><span class="p">;</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="k">typedef</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w">   </span><span class="n">base_byte_t</span><span class="p">;</span>
</code></pre></div>
<h2 id="90typedef-struct-apr_pool_t-apr_pool_ttypedef">90、为什么有的时候<code>typedef struct apr_pool_t apr_pool_t</code>自己typedef成自己<a class="headerlink" href="#90typedef-struct-apr_pool_t-apr_pool_ttypedef" title="Permanent link">&para;</a></h2>
<p>在 C/C++ 中，使用 <code>typedef</code> 将结构体类型重新命名为自己是常见的做法。主要目的是简化代码并提高可读性。这种做法通常用于前向声明和隐藏实现细节。让我们详细解释一下这种用法及其背后的原因。</p>
<h3 id="_7">前向声明<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>前向声明是告诉编译器某个类型存在，但不提供其具体定义。这样做可以在不需要完整定义的情况下使用该类型的指针或引用或函数形参。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="c1">// 前向声明</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">base_array_header_t</span><span class="w"> </span><span class="n">base_array_header_t</span><span class="p">;</span>
</code></pre></div>
<h3 id="_8">简化类型名称<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p><strong>在 C 语言中</strong>，如果你想要声明一个结构体类型并简化其名称，可以使用 <code>typedef</code>。例如：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="c1">// 定义一个结构体</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">base_array_header_t</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="p">;</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">capacity</span><span class="p">;</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="o">**</span><span class="n">data</span><span class="p">;</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="p">};</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="c1">// 使用 typedef 简化类型名称</span>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">base_array_header_t</span><span class="w"> </span><span class="n">base_array_header_t</span><span class="p">;</span>
</code></pre></div>
<p>这样，你就可以直接使用 <code>base_array_header_t</code> 而不需要每次都写 <code>struct base_array_header_t</code>：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="n">base_array_header_t</span><span class="w"> </span><span class="n">array</span><span class="p">;</span>
</code></pre></div>
<h3 id="_9">为什么要这样做？<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>提高可读性</strong>：使用 <code>typedef</code> 简化类型名称可以使代码更简洁、更易读。</li>
<li><strong>前向声明</strong>：在头文件中使用前向声明可以隐藏结构体的具体实现，将实现细节隐藏在源文件中，从而提高封装性。</li>
</ol>
<h3 id="_10">例子<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<p>以下是一个完整的示例，展示了如何使用 <code>typedef</code> 和前向声明：</p>
<h4 id="arrayh">头文件 (<code>array.h</code>)<a class="headerlink" href="#arrayh" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="cp">#ifndef ARRAY_H</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="cp">#define ARRAY_H</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="c1">// 前向声明</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">base_array_header_t</span><span class="w"> </span><span class="n">base_array_header_t</span><span class="p">;</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="c1">// 函数声明</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="n">base_array_header_t</span><span class="o">*</span><span class="w"> </span><span class="nf">create_array</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">capacity</span><span class="p">);</span>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="kt">void</span><span class="w"> </span><span class="nf">destroy_array</span><span class="p">(</span><span class="n">base_array_header_t</span><span class="o">*</span><span class="w"> </span><span class="n">array</span><span class="p">);</span>
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="cp">#endif </span><span class="c1">// ARRAY_H</span>
</code></pre></div>
<h4 id="arrayc">源文件 (<code>array.c</code>)<a class="headerlink" href="#arrayc" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;array.h&quot;</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="c1">// 结构体定义</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="k">struct</span><span class="w"> </span><span class="nc">base_array_header_t</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="p">;</span>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">capacity</span><span class="p">;</span>
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="o">**</span><span class="n">data</span><span class="p">;</span>
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="p">};</span>
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="c1">// 函数实现</span>
<a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a><span class="n">base_array_header_t</span><span class="o">*</span><span class="w"> </span><span class="nf">create_array</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">capacity</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a><span class="w">    </span><span class="n">base_array_header_t</span><span class="o">*</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">base_array_header_t</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">base_array_header_t</span><span class="p">));</span>
<a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a><span class="w">    </span><span class="n">array</span><span class="o">-&gt;</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a><span class="w">    </span><span class="n">array</span><span class="o">-&gt;</span><span class="n">capacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">capacity</span><span class="p">;</span>
<a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a><span class="w">    </span><span class="n">array</span><span class="o">-&gt;</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="o">**</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="n">capacity</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">));</span>
<a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">array</span><span class="p">;</span>
<a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a><span class="p">}</span>
<a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a>
<a id="__codelineno-19-20" name="__codelineno-19-20" href="#__codelineno-19-20"></a><span class="kt">void</span><span class="w"> </span><span class="nf">destroy_array</span><span class="p">(</span><span class="n">base_array_header_t</span><span class="o">*</span><span class="w"> </span><span class="n">array</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-21" name="__codelineno-19-21" href="#__codelineno-19-21"></a><span class="w">    </span><span class="n">free</span><span class="p">(</span><span class="n">array</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">);</span>
<a id="__codelineno-19-22" name="__codelineno-19-22" href="#__codelineno-19-22"></a><span class="w">    </span><span class="n">free</span><span class="p">(</span><span class="n">array</span><span class="p">);</span>
<a id="__codelineno-19-23" name="__codelineno-19-23" href="#__codelineno-19-23"></a><span class="p">}</span>
</code></pre></div>
<h4 id="mainc">使用示例 (<code>main.c</code>)<a class="headerlink" href="#mainc" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;array.h&quot;</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="w">    </span><span class="n">base_array_header_t</span><span class="o">*</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">create_array</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="w">    </span><span class="c1">// 使用 array</span>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="w">    </span><span class="n">destroy_array</span><span class="p">(</span><span class="n">array</span><span class="p">);</span>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="p">}</span>
</code></pre></div>
<p>通过这种方式，你可以在头文件中隐藏实现细节，提高封装性，同时在代码中使用简化的类型名称。希望这对你理解 <code>typedef</code> 和前向声明的用法有所帮助。</p>
<h3 id="_11">我的补充<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<h4 id="1_1">情况1<a class="headerlink" href="#1_1" title="Permanent link">&para;</a></h4>
<p>base.h文件，既定义了结构体，又typedef名称</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="c1">// 定义一个结构体</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">base_array_header_t</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="p">;</span>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">capacity</span><span class="p">;</span>
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="o">**</span><span class="n">data</span><span class="p">;</span>
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="p">};</span>
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="c1">// 使用 typedef 简化类型名称</span>
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">base_array_header_t</span><span class="w"> </span><span class="n">base_array_header_t</span><span class="p">;</span>
</code></pre></div>
<p>base_core.h包含base.h文件后，既可以定义指针、引用，也可以定义对象（因为可以直接找到定义）</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="n">base_array_header_t</span><span class="o">*</span><span class="w"> </span><span class="n">array</span><span class="p">;</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="n">base_array_header_t</span><span class="w"> </span><span class="n">array</span><span class="p">;</span>
</code></pre></div>
<h4 id="2">情况2<a class="headerlink" href="#2" title="Permanent link">&para;</a></h4>
<p>base.h文件，typedef了apr_finfo_t，但是具体的实现在apr库里</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">apr_finfo_t</span><span class="w"> </span><span class="n">apr_finfo_t</span><span class="p">;</span>
</code></pre></div>
<p>base_core.h包含base.h文件后，只可以定义指针、引用，定义对象会失败（因为在base.h找不定义，在我的设计中base.h文件又没办法直接去包含apr库的头文件）</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="n">apr_finfo_t</span><span class="w"> </span><span class="n">finfo</span><span class="p">;</span>
</code></pre></div>
<h2 id="90">90、在一个函数调用前莫名加::，什么作用<a class="headerlink" href="#90" title="Permanent link">&para;</a></h2>
<p>在大多数情况下，不加 <code>::</code> 也是可以的，特别是当没有命名冲突时。<code>::</code> 的作用是明确指定要调用的是全局命名空间中的函数或变量。如果当前作用域中没有同名的函数或变量，那么编译器会自动解析为全局命名空间中的函数或变量。</p>
<h3 id="_12">示例<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<p>假设当前作用域中没有名为 <code>strncmp</code> 的函数或变量，以下两种写法是等效的：</p>
<h4 id="_13">不使用 <code>::</code><a class="headerlink" href="#_13" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">strncmp</span><span class="p">(</span><span class="n">cwd</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span><span class="w"> </span><span class="n">path</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span><span class="w"> </span><span class="n">cwd</span><span class="p">.</span><span class="n">length</span><span class="p">())</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">path</span><span class="p">;</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="p">}</span>
</code></pre></div>
<h4 id="_14">使用 <code>::</code><a class="headerlink" href="#_14" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">::</span><span class="n">strncmp</span><span class="p">(</span><span class="n">cwd</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span><span class="w"> </span><span class="n">path</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span><span class="w"> </span><span class="n">cwd</span><span class="p">.</span><span class="n">length</span><span class="p">())</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">path</span><span class="p">;</span>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="p">}</span>
</code></pre></div>
<h3 id="_15">何时需要使用 <code>::</code><a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<p>你需要使用 <code>::</code> 的情况主要包括：</p>
<ol>
<li><strong>消除命名冲突</strong>：如果在当前作用域或命名空间中有同名的函数或变量，你需要使用 <code>::</code> 指定调用全局命名空间中的函数或变量。</li>
<li><strong>提高代码可读性</strong>：有时为了明确代码意图，开发者可能会使用 <code>::</code> 来表示使用的是全局命名空间中的标准库函数。</li>
</ol>
<h3 id="_16">示例：命名冲突<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;cstring&gt;</span>
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string&gt;</span>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">strncmp</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">s1</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">s2</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="w">    </span><span class="c1">// 自定义的 strncmp 实现</span>
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a><span class="p">}</span>
<a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a>
<a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">cwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;/home/user&quot;</span><span class="p">;</span>
<a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;/home/user/documents&quot;</span><span class="p">;</span>
<a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a>
<a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a><span class="w">    </span><span class="c1">// 调用全局命名空间中的 strncmp</span>
<a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">::</span><span class="n">strncmp</span><span class="p">(</span><span class="n">cwd</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span><span class="w"> </span><span class="n">path</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span><span class="w"> </span><span class="n">cwd</span><span class="p">.</span><span class="n">length</span><span class="p">())</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a><span class="w">        </span><span class="c1">// logic</span>
<a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a>
<a id="__codelineno-27-18" name="__codelineno-27-18" href="#__codelineno-27-18"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-27-19" name="__codelineno-27-19" href="#__codelineno-27-19"></a><span class="p">}</span>
</code></pre></div>
<p>在这个示例中，由于在同一作用域中定义了一个自定义的 <code>strncmp</code> 函数，需要使用 <code>::</code> 来调用标准库中的 <code>strncmp</code> 函数。</p>
<h3 id="_17">总结<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h3>
<p>在没有命名冲突的情况下，不加 <code>::</code> 也是可以的。如果你想确保调用的是全局命名空间中的函数或变量，或者为了提高代码的可读性，可以使用 <code>::</code>。</p>
<h2 id="95">95、使用动态库与静态库里东西的区别<a class="headerlink" href="#95" title="Permanent link">&para;</a></h2>
<h3 id="_18">动态库<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h3>
<h4 id="1_2">1.导出符号的限制<a class="headerlink" href="#1_2" title="Permanent link">&para;</a></h4>
<p>默认情况下，Windows 动态库（DLL）中的类和函数不会自动导出给其他模块使用。只有显式标记为导出的符号，其他模块才能访问。</p>
<p>在需要导出的类或函数前加上 <code>__declspec(dllexport)</code>，并在使用时加上 <code>__declspec(dllimport)</code>。通常通过宏来区分编译和使用时的情况：</p>
<p><strong>动态库（<code>my_library</code>）的头文件：</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="n">cpp复制代码</span><span class="err">#</span><span class="n">ifdef</span><span class="w"> </span><span class="n">MY_LIBRARY_EXPORTS</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="cp">#define MY_API __declspec(dllexport)  </span><span class="c1">// 编译动态库时导出符号</span>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="cp">#else</span>
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="cp">#define MY_API __declspec(dllimport)  </span><span class="c1">// 使用动态库时导入符号</span>
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="cp">#endif</span>
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a>
<a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="k">class</span><span class="w"> </span><span class="nc">MY_API</span><span class="w"> </span><span class="n">MyClass</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">doSomething</span><span class="p">();</span>
<a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a><span class="p">};</span>
</code></pre></div>
<p><strong>动态库的实现文件：</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="n">cpp复制代码</span><span class="err">#</span><span class="n">include</span><span class="w"> </span><span class="s">&quot;my_library.h&quot;</span>
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="kt">void</span><span class="w"> </span><span class="n">MyClass</span><span class="o">::</span><span class="n">doSomething</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="w">    </span><span class="c1">// 实现代码</span>
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="p">}</span>
</code></pre></div>
<p><strong>使用动态库的代码：</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;my_library.h&quot;</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="w">    </span><span class="n">MyClass</span><span class="w"> </span><span class="n">obj</span><span class="p">;</span>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="w">    </span><span class="n">obj</span><span class="p">.</span><span class="n">doSomething</span><span class="p">();</span>
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a><span class="p">}</span>
</code></pre></div>
<h4 id="2name-mangling">2.名字修饰（Name Mangling）问题<a class="headerlink" href="#2name-mangling" title="Permanent link">&para;</a></h4>
<p>C++ 编译器会对类名和函数名进行修饰以支持重载等特性，不同编译器（甚至同一编译器的不同版本）可能使用不同的名字修饰规则。如果动态库和使用者的模块由不同的编译器编译，可能导致符号解析失败。</p>
<p><strong>解决方案</strong></p>
<p>使用 <code>extern "C"</code> 禁用 C++ 的名字修饰，适用于函数，但对类需要额外的封装：</p>
<p><strong>动态库提供一个 C 风格的接口：</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="k">extern</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="w">    </span><span class="kr">__declspec</span><span class="p">(</span><span class="n">dllexport</span><span class="p">)</span><span class="w"> </span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">createMyClass</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyClass</span><span class="p">();</span>
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a>
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a><span class="w">    </span><span class="kr">__declspec</span><span class="p">(</span><span class="n">dllexport</span><span class="p">)</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">destroyMyClass</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a><span class="w">        </span><span class="k">delete</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">MyClass</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">obj</span><span class="p">);</span>
<a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a><span class="p">}</span>
</code></pre></div>
<p><strong>使用动态库：</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="k">typedef</span><span class="w"> </span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">CreateFunc</span><span class="p">)();</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="k">typedef</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">DestroyFunc</span><span class="p">)(</span><span class="kt">void</span><span class="o">*</span><span class="p">);</span>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="n">HMODULE</span><span class="w"> </span><span class="n">lib</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LoadLibrary</span><span class="p">(</span><span class="s">&quot;my_library.dll&quot;</span><span class="p">);</span>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="n">CreateFunc</span><span class="w"> </span><span class="n">createMyClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">CreateFunc</span><span class="p">)</span><span class="n">GetProcAddress</span><span class="p">(</span><span class="n">lib</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;createMyClass&quot;</span><span class="p">);</span>
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="n">DestroyFunc</span><span class="w"> </span><span class="n">destroyMyClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">DestroyFunc</span><span class="p">)</span><span class="n">GetProcAddress</span><span class="p">(</span><span class="n">lib</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;destroyMyClass&quot;</span><span class="p">);</span>
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>
<a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createMyClass</span><span class="p">();</span>
<a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a><span class="c1">// 使用对象</span>
<a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a><span class="n">destroyMyClass</span><span class="p">(</span><span class="n">obj</span><span class="p">);</span>
<a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a><span class="n">FreeLibrary</span><span class="p">(</span><span class="n">lib</span><span class="p">);</span>
</code></pre></div>
<h4 id="3">3.类的静态成员或全局变量问题<a class="headerlink" href="#3" title="Permanent link">&para;</a></h4>
<p>动态库中的类如果包含静态成员或全局变量，这些变量的实例只存在于动态库内部。如果其他模块尝试访问这些变量，可能导致未定义行为。</p>
<ul>
<li>确保静态成员或全局变量在动态库中正确导出。</li>
<li>使用函数来访问静态变量，而不是直接访问。</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">MY_API</span><span class="w"> </span><span class="n">MyClass</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">getStaticValue</span><span class="p">();</span>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">staticValue_</span><span class="p">;</span><span class="w"> </span><span class="c1">// 静态成员</span>
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a><span class="p">};</span>
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a>
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a><span class="c1">// 在 cpp 文件中定义并导出静态成员</span>
<a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a><span class="kt">int</span><span class="w"> </span><span class="n">MyClass</span><span class="o">::</span><span class="n">staticValue_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span>
<a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a>
<a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a><span class="kt">int</span><span class="w"> </span><span class="nf">MyClass::getStaticValue</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-12" name="__codelineno-33-12" href="#__codelineno-33-12"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">staticValue_</span><span class="p">;</span>
<a id="__codelineno-33-13" name="__codelineno-33-13" href="#__codelineno-33-13"></a><span class="p">}</span>
</code></pre></div>
<h4 id="_19">总结：<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h4>
<ul>
<li>正确使用 <code>__declspec(dllexport)</code> 和 <code>__declspec(dllimport)</code>。</li>
<li>尽量使用纯 C 接口封装复杂类。</li>
<li>避免跨模块直接共享复杂对象，采用工厂函数、抽象接口或封装的方式管理类实例。</li>
</ul>
<h3 id="_20">静态库<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h3>
<h4 id="1_3">1.静态库的基本工作方式<a class="headerlink" href="#1_3" title="Permanent link">&para;</a></h4>
<p>静态库（<code>.lib</code> 文件）是将预编译好的目标文件代码打包起来的库。在构建应用程序时，静态库的代码会被链接到最终的可执行文件中。静态库文件本身并不包含任何运行时需要的代码，它只是一些目标文件的集合，提供了一些函数和类的定义。</p>
<p><strong>类在静态库中的使用方式：</strong></p>
<ol>
<li><strong>头文件提供接口</strong>：静态库中定义的类需要在头文件中声明。其他模块可以通过包含这些头文件来访问类的声明。</li>
<li><strong>链接时包含静态库</strong>：在链接阶段，静态库中的实现代码会与应用程序一起链接，形成最终的可执行文件。</li>
</ol>
<h4 id="2_1"><strong>2. 如何在其他模块中使用静态库中的类</strong><a class="headerlink" href="#2_1" title="Permanent link">&para;</a></h4>
<p>静态库中的类在其他模块中使用的过程和动态库类似，区别在于：</p>
<ul>
<li>静态库的代码会被链接进最终的可执行文件。</li>
<li>
<p>不需要额外的 <code>__declspec(dllexport)</code> 或 <code>__declspec(dllimport)</code> 声明。</p>
</li>
<li>
<p><strong>头文件声明类：</strong> 静态库中的类需要在头文件中声明。</p>
</li>
</ul>
<p><strong>静态库中的类头文件：</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="c1">// MyClass.h</span>
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="w">    </span><span class="n">MyClass</span><span class="p">();</span>
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">doSomething</span><span class="p">();</span>
<a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="p">};</span>
</code></pre></div>
<ol>
<li><strong>静态库中的类实现：</strong> 类的定义在静态库的源文件中。</li>
</ol>
<p><strong>静态库中的类实现：</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="c1">// MyClass.cpp</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;MyClass.h&quot;</span>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="n">MyClass</span><span class="o">::</span><span class="n">MyClass</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a>
<a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="kt">void</span><span class="w"> </span><span class="n">MyClass</span><span class="o">::</span><span class="n">doSomething</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="w">    </span><span class="c1">// 实现代码</span>
<a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="p">}</span>
</code></pre></div>
<ol>
<li><strong>编译并创建静态库</strong>： 使用 C++ 编译器创建静态库（例如 <code>libMyLibrary.a</code> 或 <code>MyLibrary.lib</code>）。</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>g++<span class="w"> </span>-c<span class="w"> </span>MyClass.cpp<span class="w"> </span>-o<span class="w"> </span>MyClass.o
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>ar<span class="w"> </span>rcs<span class="w"> </span>libMyLibrary.a<span class="w"> </span>MyClass.o
</code></pre></div>
<ol>
<li><strong>其他模块中使用静态库中的类：</strong> 在其他模块中引用静态库的类时，需要包含相应的头文件，并在链接阶段指定静态库文件。</li>
</ol>
<p><strong>使用静态库的代码：</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="c1">// main.cpp</span>
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;MyClass.h&quot;</span>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a>
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a><span class="w">    </span><span class="n">MyClass</span><span class="w"> </span><span class="n">obj</span><span class="p">;</span>
<a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a><span class="w">    </span><span class="n">obj</span><span class="p">.</span><span class="n">doSomething</span><span class="p">();</span>
<a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a><span class="p">}</span>
</code></pre></div>
<ol>
<li><strong>编译并链接应用程序：</strong> 在编译应用程序时，将静态库与其他源文件一起链接。</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>g++<span class="w"> </span>main.cpp<span class="w"> </span>-L.<span class="w"> </span>-lMyLibrary<span class="w"> </span>-o<span class="w"> </span>myapp
</code></pre></div>
<h4 id="3_1">3.静态库中类的限制<a class="headerlink" href="#3_1" title="Permanent link">&para;</a></h4>
<p>虽然静态库中的类可以在其他模块中使用，但有一些注意事项和限制：</p>
<h5 id="31"><strong>3.1. 链接阶段的参与</strong><a class="headerlink" href="#31" title="Permanent link">&para;</a></h5>
<ul>
<li>静态库的类仅在编译链接时被包含到最终的可执行文件中，应用程序的大小会增加，因为类的实现会被直接复制到每个使用它的模块中。</li>
<li>如果多个模块使用同一个静态库中的类，静态库的代码会被多次嵌入到最终可执行文件中，导致最终的可执行文件体积较大。</li>
</ul>
<h5 id="32"><strong>3.2. 静态库和全局状态</strong><a class="headerlink" href="#32" title="Permanent link">&para;</a></h5>
<ul>
<li>静态库中的类和全局变量是静态的（即它们的生命周期从程序开始直到程序结束），因此它们不会像动态库那样可以在运行时加载和卸载。</li>
<li>类的静态成员（如静态变量）也会在每个使用该类的模块中独立存在。如果有多个模块同时使用相同的静态库类，可能会出现多个静态成员的副本。</li>
</ul>
<h5 id="33"><strong>3.3. 名字冲突</strong><a class="headerlink" href="#33" title="Permanent link">&para;</a></h5>
<ul>
<li>静态库中的类如果在不同的模块中有不同的实现版本，可能会导致符号冲突，尤其是类和函数的重名。</li>
<li>使用适当的命名空间可以帮助避免这种问题。</li>
</ul>
<h4 id="4"><strong>4. 总结：</strong><a class="headerlink" href="#4" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>是的，静态库中的类可以被其他模块使用</strong>。通过将类的头文件包含在其他模块中，并在链接时链接静态库，类的实现会被嵌入到最终的可执行文件中。</li>
<li>静态库的使用和动态库相比，主要的不同点在于链接方式：静态库在链接时直接把代码整合到可执行文件中，而动态库的代码在程序运行时加载。</li>
<li>需要注意静态库中的类和全局变量的静态性质，以及类的静态成员变量和可能的符号冲突问题。</li>
</ul>
<h3 id="_21">什么时候静态库，什么时候动态库<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h3>
<ul>
<li>只有一个模块需要链接的库，用静态库；体积大，但性能好，小型项目、单机部署。</li>
<li>有多个模块都要使用，用动态库，动态链接；模块化设计、动态加载，复用、独立更新。</li>
</ul>
<h2 id="100">100、上层模块使用了这个静态库，静态库依赖于动态库，编译的时候是把静态库一起编译进上层模块的代码里，那动态库的代码呢<a class="headerlink" href="#100" title="Permanent link">&para;</a></h2>
<p>当上层模块使用了一个静态库，并且这个静态库依赖动态库时，编译过程和链接过程如下：</p>
<hr />
<h3 id="1_4"><strong>1. 静态库的代码：</strong><a class="headerlink" href="#1_4" title="Permanent link">&para;</a></h3>
<ul>
<li>静态库会被嵌入到上层模块的可执行文件中</li>
</ul>
<p>。</p>
<ul>
<li>在编译上层模块时，静态库的 <code>.a</code> 文件会被解包，所需的对象文件直接加入到最终的可执行文件中。</li>
<li>这部分代码完全成为可执行文件的一部分，无需在运行时依赖静态库。</li>
</ul>
<hr />
<h3 id="2_2"><strong>2. 动态库的代码：</strong><a class="headerlink" href="#2_2" title="Permanent link">&para;</a></h3>
<ul>
<li>动态库不会被嵌入到上层模块的可执行文件中</li>
</ul>
<p>。</p>
<ul>
<li>静态库中调用动态库的函数实际上是动态库的符号（函数或全局变量）的引用。</li>
<li>上层模块在链接阶段需要**显式链接动态库**，这些引用符号会在链接阶段通过动态库的符号表解析。</li>
</ul>
<hr />
<h3 id="3_2"><strong>3. 编译与链接的流程：</strong><a class="headerlink" href="#3_2" title="Permanent link">&para;</a></h3>
<h4 id="_22">假设：<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>静态库</strong> <code>libstatic.a</code> 依赖于动态库 <code>libdynamic.so</code>。</li>
<li>上层模块 <code>main.cpp</code> 使用 <code>libstatic.a</code>。</li>
</ul>
<h4 id="_23">编译和链接过程：<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="c1"># 1. 生成静态库 libstatic.a</span>
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>g++<span class="w"> </span>-c<span class="w"> </span>static_lib.cpp<span class="w"> </span>-o<span class="w"> </span>static_lib.o
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>ar<span class="w"> </span>rcs<span class="w"> </span>libstatic.a<span class="w"> </span>static_lib.o
<a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a>
<a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a><span class="c1"># 2. 编译上层模块，并显式链接动态库 libdynamic.so</span>
<a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a>g++<span class="w"> </span>main.cpp<span class="w"> </span>-L.<span class="w"> </span>-lstatic<span class="w"> </span>-ldynamic<span class="w"> </span>-o<span class="w"> </span>my_app
</code></pre></div>
<ul>
<li><strong>编译阶段：</strong></li>
<li>编译器会将 <code>libstatic.a</code> 中的符号与 <code>main.cpp</code> 中的调用匹配。</li>
<li>如果 <code>libstatic.a</code> 中引用了 <code>libdynamic.so</code> 的符号，编译器会将这些符号标记为外部依赖。</li>
<li><strong>链接阶段：</strong></li>
<li>链接器会解析静态库的符号，并将它嵌入 <code>my_app</code> 中。</li>
<li>链接器会查找 <code>libdynamic.so</code> 的符号表，解析动态库的外部符号引用，但动态库本身不会嵌入 <code>my_app</code> 中。</li>
<li><strong>运行阶段：</strong></li>
<li><code>my_app</code> 在运行时需要加载 <code>libdynamic.so</code>。</li>
<li>系统动态链接器（如 Linux 的 <code>ld.so</code> 或 Windows 的 <code>DLL Loader</code>）会在运行时加载动态库，并将其符号绑定到 <code>my_app</code> 中。</li>
</ul>
<hr />
<h3 id="4_1"><strong>4. 上层模块中的动态库处理：</strong><a class="headerlink" href="#4_1" title="Permanent link">&para;</a></h3>
<p>动态库的代码**不会被嵌入到上层模块的可执行文件中**，而是以下方式处理：</p>
<ol>
<li>
<p><strong>链接的动态库路径记录在可执行文件中</strong>：</p>
</li>
<li>
<p>链接时使用 <code>-rpath</code> 或类似选项将动态库路径嵌入到可执行文件中。</p>
</li>
<li>
<p>示例：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>g++<span class="w"> </span>main.cpp<span class="w"> </span>-L.<span class="w"> </span>-lstatic<span class="w"> </span>-ldynamic<span class="w"> </span>-Wl,-rpath,/path/to/libdynamic<span class="w"> </span>-o<span class="w"> </span>my_app
</code></pre></div>
</li>
<li>
<p><strong>运行时加载动态库</strong>：</p>
</li>
<li>
<p>系统动态链接器根据可执行文件中的路径或环境变量（如 <code>LD_LIBRARY_PATH</code>）找到并加载动态库。</p>
</li>
</ol>
<hr />
<h3 id="5"><strong>5. 注意事项：</strong><a class="headerlink" href="#5" title="Permanent link">&para;</a></h3>
<h4 id="_24">如果动态库版本发生变化：<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>API/ABI 兼容：</strong> 如果动态库的 API 或 ABI 保持兼容，上层模块不会受到影响。</li>
<li><strong>API/ABI 不兼容：</strong> 如果动态库的 API 或 ABI 发生不兼容的变更，上层模块可能会在运行时崩溃。</li>
</ul>
<h4 id="_25">如果动态库缺失：<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h4>
<ul>
<li>程序会在运行时失败，提示找不到动态库。</li>
</ul>
<h4 id="_26">调试与优化：<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h4>
<ul>
<li>确保动态库的版本控制和路径管理（如 <code>rpath</code> 或 <code>.dll</code> 的分发）。</li>
<li>考虑将动态库功能编译为静态库，以避免运行时依赖。</li>
</ul>
<hr />
<h3 id="_27"><strong>总结：</strong><a class="headerlink" href="#_27" title="Permanent link">&para;</a></h3>
<p>静态库的代码嵌入上层模块，而动态库的代码不会嵌入。动态库会在运行时加载，其符号引用在链接阶段解析，路径需要正确配置。如果动态库是核心依赖，建议仔细管理版本和部署策略，以减少运行时问题。</p>
<h2 id="105">105、有时候新加的模块没有编译起来<a class="headerlink" href="#105" title="Permanent link">&para;</a></h2>
<ul>
<li>检查一下最上层的cmake文件是否有包含该子目录</li>
</ul>
<h2 id="100private">100、有时候将一个类的构造函数写成private<a class="headerlink" href="#100private" title="Permanent link">&para;</a></h2>
<p>将构造函数声明为 <code>private</code> 是一种设计模式，常用于控制类实例的创建方式。结合你的代码上下文，这是一个插件类的实现，采用了 <strong>静态工厂方法模式</strong> 或 <strong>单例模式的变体</strong>。这种写法的主要目的和机制如下：</p>
<hr />
<h3 id="1_5"><strong>1. 限制直接实例化</strong><a class="headerlink" href="#1_5" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>意图</strong>：不允许外部代码通过 <code>new</code> 直接创建 <code>FidgetyPhantom</code> 的实例。</li>
<li><strong>原因</strong>：控制类实例的创建过程，确保只能通过某些特定方法（如 <code>create</code>）创建对象。</li>
</ul>
<p>在你的代码中，<code>FidgetyPhantom</code> 的实例只能通过 <code>static void* create(PF_ObjectParams*)</code> 创建。</p>
<hr />
<h3 id="2_3"><strong>2. 静态工厂方法</strong><a class="headerlink" href="#2_3" title="Permanent link">&para;</a></h3>
<p>这种写法表明 <code>FidgetyPhantom</code> 使用了静态工厂方法（<code>create</code>）来创建对象。具体实现如下：</p>
<ul>
<li>工厂方法的优点：</li>
<li><strong>控制创建过程</strong>：可以对创建的对象进行初始化、注册或限制。</li>
<li><strong>灵活性</strong>：工厂方法可以返回派生类实例（或其他类型），而不仅仅是 <code>FidgetyPhantom</code>。</li>
<li><strong>封装复杂逻辑</strong>：复杂的初始化逻辑可以隐藏在 <code>create</code> 函数内部。</li>
<li>代码流程：</li>
<li><code>create</code> 方法是公有的，外部可以调用它。</li>
<li><code>create</code> 在内部使用 <code>new FidgetyPhantom()</code> 创建对象。</li>
<li><code>FidgetyPhantom</code> 的构造函数是私有的，因此只能由 <code>create</code> 调用。</li>
</ul>
<p>例如：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="nf">FidgetyPhantom::create</span><span class="p">(</span><span class="n">PF_ObjectParams</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">params</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FidgetyPhantom</span><span class="p">();</span><span class="w"> </span><span class="c1">// 内部可以创建实例</span>
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="p">}</span>
</code></pre></div>
<hr />
<h3 id="3_3"><strong>3. 控制销毁方式</strong><a class="headerlink" href="#3_3" title="Permanent link">&para;</a></h3>
<p>配合 <code>destroy</code> 方法，确保类实例的生命周期由类自身管理：</p>
<ul>
<li><strong>销毁控制</strong>： 外部不能直接通过 <code>delete</code> 销毁对象，而必须调用 <code>destroy</code>。</li>
<li><strong>原因</strong>：</li>
<li>避免误用：如果外部直接调用 <code>delete</code>，可能导致内存泄漏或其他副作用。</li>
<li>统一资源管理：类内部可以在 <code>destroy</code> 方法中执行额外的清理逻辑，例如注销对象、释放全局资源等。</li>
</ul>
<p>例如：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="n">apr_int32_t</span><span class="w"> </span><span class="nf">FidgetyPhantom::destroy</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">instance</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">instance</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="w">    </span><span class="k">delete</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">FidgetyPhantom</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">instance</span><span class="p">);</span><span class="w"> </span><span class="c1">// 安全地释放对象</span>
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a><span class="p">}</span>
</code></pre></div>
<hr />
<h3 id="4_2"><strong>4. 典型用途</strong><a class="headerlink" href="#4_2" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>插件系统</strong>：如你的例子，<code>create</code> 和 <code>destroy</code> 是典型的插件工厂接口。</li>
<li><strong>单例模式</strong>：有时也会将构造函数设为 <code>private</code> 来限制直接创建对象，只能通过静态方法获取单例实例。</li>
<li><strong>自定义内存管理</strong>：可以在 <code>create</code> 或 <code>destroy</code> 中定制内存分配与释放逻辑。</li>
<li><strong>依赖注入</strong>：通过工厂方法，将外部依赖通过参数传入并封装。</li>
</ul>
<hr />
<h3 id="5_1"><strong>5. 实例化限制的效果</strong><a class="headerlink" href="#5_1" title="Permanent link">&para;</a></h3>
<ul>
<li>外部代码：</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="n">FidgetyPhantom</span><span class="w"> </span><span class="n">obj</span><span class="p">;</span><span class="w"> </span><span class="c1">// 错误！构造函数是私有的，无法直接实例化。</span>
</code></pre></div>
<ul>
<li>正确使用方式：</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="n">PF_ObjectParams</span><span class="w"> </span><span class="n">params</span><span class="p">;</span><span class="w"> </span><span class="c1">// 假设已经初始化</span>
<a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FidgetyPhantom</span><span class="o">::</span><span class="n">create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">params</span><span class="p">);</span><span class="w"> </span><span class="c1">// 正确创建</span>
<a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a><span class="n">FidgetyPhantom</span><span class="o">::</span><span class="n">destroy</span><span class="p">(</span><span class="n">obj</span><span class="p">);</span><span class="w">               </span><span class="c1">// 正确销毁</span>
</code></pre></div>
<hr />
<h3 id="6"><strong>6. 总结</strong><a class="headerlink" href="#6" title="Permanent link">&para;</a></h3>
<ul>
<li>私有构造函数限制直接实例化。</li>
<li>静态工厂方法控制对象的创建与初始化。</li>
<li><code>destroy</code> 方法统一管理对象的生命周期。</li>
<li>这种模式常用于插件系统、单例模式和自定义内存管理场景。</li>
</ul>
<h2 id="1050">105、错误码一般怎么设置，负数、0、正数<a class="headerlink" href="#1050" title="Permanent link">&para;</a></h2>
<p>错误码的设计是一种标准化的方式，用于在函数或接口调用时传递执行状态。通常，错误码的约定如下：</p>
<h3 id="_28">常见的错误码约定<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p><strong>负数</strong></p>
</li>
<li>
<p><strong>表示错误</strong>，用负数区分不同类型的错误。</p>
</li>
<li>常用于返回明确的错误类型或异常状态。</li>
<li>例如：<ul>
<li><code>-1</code>: 一般性错误。</li>
<li><code>-2</code>: 无效参数。</li>
<li><code>-3</code>: 文件未找到。</li>
<li><code>-4</code>: 内存分配失败。</li>
</ul>
</li>
</ol>
<p><strong>优点</strong>：负值显眼，容易与成功的返回值区分开。</p>
<ol>
<li>
<p><strong>零 (0)</strong></p>
</li>
<li>
<p><strong>表示成功</strong>。</p>
</li>
<li>这是最常见的约定，因为零被认为是自然状态、默认值或无错误状态。</li>
<li>
<p>在标准库中也经常看到，比如：</p>
<ul>
<li><code>main()</code> 函数返回 <code>0</code> 表示程序正常退出。</li>
</ul>
</li>
<li>
<p><strong>正数</strong></p>
</li>
<li>
<p><strong>表示成功时的额外信息或状态码</strong>。</p>
</li>
<li>例如：<ul>
<li>函数返回处理的条目数量或生成的资源 ID。</li>
<li><code>1</code>: 特殊的成功状态（如部分成功）。</li>
<li><code>2</code>: 可能是警告或非致命的状态（如需要更多操作）。</li>
</ul>
</li>
</ol>
<p><strong>优点</strong>：正数可以传递额外的信息，同时与错误区分开。</p>
<hr />
<h3 id="posix">实例：POSIX 错误码设计<a class="headerlink" href="#posix" title="Permanent link">&para;</a></h3>
<p>POSIX（Unix/Linux）系统中错误码的设计方式：</p>
<ul>
<li>
<p><strong>0</strong>: 表示成功。</p>
</li>
<li>
<p><strong>负数</strong>: 不使用，但某些语言（如 C++）的函数可能用异常表示错误。</p>
</li>
<li>
<p>正数: 表示错误码，通过全局变量 </p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>errno
</code></pre></div>
<p>访问，通常定义在 </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>&lt;errno.h&gt;
</code></pre></div>
<p>中。</p>
<ul>
<li><code>1</code> (EPERM): 操作不允许。</li>
<li><code>2</code> (ENOENT): 文件或目录不存在。</li>
<li><code>12</code> (ENOMEM): 内存不足。</li>
</ul>
<hr />
<h3 id="_29">实际设计中的建议<a class="headerlink" href="#_29" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p><strong>错误码范围</strong></p>
</li>
<li>
<p>使用负数和正数的不同范围清晰区分状态。</p>
<ul>
<li>负数范围：<code>-1</code> 到 <code>-1000</code> 表示不同错误。</li>
<li>正数范围：<code>1</code> 到 <code>1000</code> 表示成功状态的附加信息。</li>
</ul>
</li>
<li>
<p>保留特殊值：</p>
<ul>
<li><code>0</code>: 保留为通用的 "成功" 标志。</li>
<li><code>-1</code>: 表示通用的 "失败"。</li>
</ul>
</li>
<li>
<p><strong>可扩展性</strong></p>
</li>
<li>
<p>为特定模块预留范围：</p>
<ul>
<li>负数 <code>-100</code> 到 <code>-199</code>: 内存管理相关错误。</li>
<li>负数 <code>-200</code> 到 <code>-299</code>: 文件操作相关错误。</li>
<li>正数 <code>100</code> 到 <code>199</code>: 数据处理相关成功状态。</li>
</ul>
</li>
<li>
<p>避免重复定义。</p>
</li>
<li>
<p><strong>友好的错误消息</strong></p>
</li>
<li>
<p>提供与错误码对应的描述性错误消息，方便排查问题。例如：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="nf">getErrorMessage</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">errorCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">errorCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="mi">-1</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;General error&quot;</span><span class="p">;</span>
<a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="mi">-2</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Invalid parameter&quot;</span><span class="p">;</span>
<a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="mi">-3</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;File not found&quot;</span><span class="p">;</span>
<a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a><span class="w">        </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Unknown error&quot;</span><span class="p">;</span>
<a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a><span class="p">}</span>
</code></pre></div>
</li>
</ol>
<hr />
<h3 id="_30">示例代码<a class="headerlink" href="#_30" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a>
<a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a><span class="cp">#define SUCCESS 0</span>
<a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a><span class="cp">#define ERR_INVALID_PARAM -1</span>
<a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a><span class="cp">#define ERR_FILE_NOT_FOUND -2</span>
<a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a><span class="cp">#define ERR_MEMORY_ALLOC -3</span>
<a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a>
<a id="__codelineno-48-8" name="__codelineno-48-8" href="#__codelineno-48-8"></a><span class="kt">int</span><span class="w"> </span><span class="nf">exampleFunction</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">param</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-48-9" name="__codelineno-48-9" href="#__codelineno-48-9"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">param</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-48-10" name="__codelineno-48-10" href="#__codelineno-48-10"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ERR_INVALID_PARAM</span><span class="p">;</span><span class="w">  </span><span class="c1">// 错误：无效参数</span>
<a id="__codelineno-48-11" name="__codelineno-48-11" href="#__codelineno-48-11"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">param</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-48-12" name="__codelineno-48-12" href="#__codelineno-48-12"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ERR_FILE_NOT_FOUND</span><span class="p">;</span><span class="w"> </span><span class="c1">// 错误：文件未找到</span>
<a id="__codelineno-48-13" name="__codelineno-48-13" href="#__codelineno-48-13"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">param</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-48-14" name="__codelineno-48-14" href="#__codelineno-48-14"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ERR_MEMORY_ALLOC</span><span class="p">;</span><span class="w">   </span><span class="c1">// 错误：内存分配失败</span>
<a id="__codelineno-48-15" name="__codelineno-48-15" href="#__codelineno-48-15"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-48-16" name="__codelineno-48-16" href="#__codelineno-48-16"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">param</span><span class="p">;</span><span class="w">  </span><span class="c1">// 成功：返回参数值</span>
<a id="__codelineno-48-17" name="__codelineno-48-17" href="#__codelineno-48-17"></a><span class="p">}</span>
<a id="__codelineno-48-18" name="__codelineno-48-18" href="#__codelineno-48-18"></a>
<a id="__codelineno-48-19" name="__codelineno-48-19" href="#__codelineno-48-19"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-48-20" name="__codelineno-48-20" href="#__codelineno-48-20"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">exampleFunction</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>
<a id="__codelineno-48-21" name="__codelineno-48-21" href="#__codelineno-48-21"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-48-22" name="__codelineno-48-22" href="#__codelineno-48-22"></a><span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Error: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">);</span>
<a id="__codelineno-48-23" name="__codelineno-48-23" href="#__codelineno-48-23"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-48-24" name="__codelineno-48-24" href="#__codelineno-48-24"></a><span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Success: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">);</span>
<a id="__codelineno-48-25" name="__codelineno-48-25" href="#__codelineno-48-25"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-48-26" name="__codelineno-48-26" href="#__codelineno-48-26"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-48-27" name="__codelineno-48-27" href="#__codelineno-48-27"></a><span class="p">}</span>
</code></pre></div>
<hr />
<h3 id="_31">总结<a class="headerlink" href="#_31" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>负数</strong>: 标识错误，便于快速定位问题。</li>
<li><strong>0</strong>: 标识成功，是最常见的标准。</li>
<li><strong>正数</strong>: 标识成功的附加信息或警告状态。</li>
<li><strong>一致性</strong>: 确保错误码的设计和使用在整个系统或项目中保持统一。</li>
</ul>
<h2 id="110">110、要使用动态库里的宏，不需要导出<a class="headerlink" href="#110" title="Permanent link">&para;</a></h2>
<h3 id="1_6"><strong>1. 宏的本质</strong><a class="headerlink" href="#1_6" title="Permanent link">&para;</a></h3>
<p>宏是通过预处理器展开的代码片段，并不会生成可执行的符号。
因此，<strong>宏本身不需要导出</strong>，因为它在编译期就已经展开。
但是，要确保外部能够使用宏，你需要在头文件中声明宏并让其可见。</p>
<h3 id="2_4"><strong>2. 动态库导出的是函数或变量</strong><a class="headerlink" href="#2_4" title="Permanent link">&para;</a></h3>
<p>动态库导出的内容通常是函数或变量，而不是宏。
宏只是文本替换，在预处理阶段就被处理掉了，不会出现在最终的动态库中。
例如：</p>
<h4 id="_32">宏定义（不会导出）：<a class="headerlink" href="#_32" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="cp">#define SQUARE(x) ((x) * (x))</span>
</code></pre></div>
<p>宏 <code>SQUARE</code> 会在预处理时被替换为对应的代码，因此无需导出。</p>
<h4 id="_33">导出函数（需要导出）：<a class="headerlink" href="#_33" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">square</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a><span class="p">}</span>
</code></pre></div>
<p>如果 <code>square</code> 是函数，就需要使用导出机制，使其对外部可用。</p>
<h3 id="3_4"><strong>3. 宏是否需要导出，取决于它的用途</strong><a class="headerlink" href="#3_4" title="Permanent link">&para;</a></h3>
<h4 id="1_7">情况 1：宏只在头文件中定义<a class="headerlink" href="#1_7" title="Permanent link">&para;</a></h4>
<p>如果宏只需要在头文件中定义，那么外部模块通过包含头文件就可以使用，<strong>不需要额外导出</strong>：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="c1">// mylib.h</span>
<a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a><span class="cp">#define MAX(a, b) ((a) &gt; (b) ? (a) : (b))</span>
</code></pre></div>
<h4 id="2_5">情况 2：宏依赖动态库中的符号<a class="headerlink" href="#2_5" title="Permanent link">&para;</a></h4>
<p>如果宏的功能依赖于动态库中定义的函数或变量，你需要确保这些依赖项已导出：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="c1">// mylib.h</span>
<a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a><span class="cp">#define SQUARE(x) (square(x))</span>
<a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a>
<a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a><span class="c1">// mylib.c</span>
<a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a><span class="kr">__declspec</span><span class="p">(</span><span class="n">dllexport</span><span class="p">)</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">square</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-52-6" name="__codelineno-52-6" href="#__codelineno-52-6"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<a id="__codelineno-52-7" name="__codelineno-52-7" href="#__codelineno-52-7"></a><span class="p">}</span>
</code></pre></div>
<p>在这种情况下，<code>square</code> 函数需要导出，否则外部无法链接到它。</p>
<h3 id="_34">总结<a class="headerlink" href="#_34" title="Permanent link">&para;</a></h3>
<ul>
<li>宏本质上是预处理器的文本替换，不需要导出。</li>
<li>如果宏依赖动态库中的函数或变量，这些符号需要导出。</li>
<li>使用宏时，确保包含正确的头文件。</li>
</ul>
<h2 id="115cmake-cache">115、新模块建立时，生成cmake cache失败<a class="headerlink" href="#115cmake-cache" title="Permanent link">&para;</a></h2>
<p>新模块想要编译起来，必须要有头文件、源文件，这才有的编</p>
<h2 id="120windowsexplib">120、windows上，没有定义导出符号，没办法生成.exp和.lib文件<a class="headerlink" href="#120windowsexplib" title="Permanent link">&para;</a></h2>
<p>Windows 平台上，<code>.exp</code> 文件是 <strong>导出文件（Export File）</strong>，它在构建动态链接库（DLL）时由链接器生成。这个文件的作用是记录 DLL 中导出的符号（函数或变量）的信息。</p>
<hr />
<h3 id="exp"><strong><code>.exp</code> 文件的作用</strong><a class="headerlink" href="#exp" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>记录导出符号</strong>
   它包含动态库中所有导出的符号的列表，以及它们在动态库中的地址或偏移量。</li>
<li><strong>辅助创建 <code>.lib</code> 文件</strong>
   在构建 DLL 时，链接器会同时生成：</li>
<li><code>.dll</code> 文件：动态链接库文件，包含实现代码。</li>
<li><code>.lib</code> 文件：用于静态链接的导入库，提供符号引用。</li>
<li><code>.exp</code> 文件：中间文件，记录导出符号，用于生成 <code>.lib</code> 文件。</li>
<li><strong>调试和链接辅助</strong>
   在某些特殊情况下（例如无 <code>.lib</code> 文件时），<code>.exp</code> 文件可以作为参考信息，帮助开发者手动链接到动态库的导出符号。</li>
</ol>
<hr />
<h3 id="exp_1"><strong><code>.exp</code> 文件的生成过程</strong><a class="headerlink" href="#exp_1" title="Permanent link">&para;</a></h3>
<p><code>.exp</code> 文件通常是在以下情况下生成的：</p>
<ol>
<li><strong>使用 <code>__declspec(dllexport)</code> 导出符号</strong>
   当代码中使用 <code>__declspec(dllexport)</code> 标记某些函数或变量时，链接器会记录这些导出的符号到 <code>.exp</code> 文件中。</li>
<li><strong>通过 <code>.def</code> 文件指定导出符号</strong>
   使用模块定义文件（<code>.def</code> 文件）来指定需要导出的符号时，链接器也会生成 <code>.exp</code> 文件。</li>
</ol>
<h2 id="125">125、动态库的动态链接和动态库的静态链接有什么区别<a class="headerlink" href="#125" title="Permanent link">&para;</a></h2>
<p><strong>动态库的动态链接</strong> 和 <strong>动态库的静态链接</strong> 是使用动态库（如 <code>.dll</code> 或 <code>.so</code> 文件）的两种不同方式，主要区别在于链接时机和依赖处理方式。以下是详细对比和分析：</p>
<hr />
<h3 id="_35"><strong>动态库的动态链接</strong><a class="headerlink" href="#_35" title="Permanent link">&para;</a></h3>
<h4 id="_36"><strong>定义</strong><a class="headerlink" href="#_36" title="Permanent link">&para;</a></h4>
<p>程序在运行时动态加载动态库，使用其功能。</p>
<h4 id="_37"><strong>工作原理</strong><a class="headerlink" href="#_37" title="Permanent link">&para;</a></h4>
<ul>
<li>程序编译和链接时不需要动态库的导入库（<code>.lib</code> 或 <code>.a</code>）。</li>
<li>程序运行时，通过函数（如 <code>LoadLibrary</code> 在 Windows 上，或 <code>dlopen</code> 在 Linux 上）加载动态库，并通过符号解析（如 <code>GetProcAddress</code> 或 <code>dlsym</code>）调用动态库中的函数。</li>
</ul>
<h4 id="_38"><strong>特点</strong><a class="headerlink" href="#_38" title="Permanent link">&para;</a></h4>
<ol>
<li>运行时加载:</li>
<li>动态库在程序运行时才被加载。</li>
<li>可以根据条件按需加载动态库。</li>
<li>无强制性编译依赖:</li>
<li>编译阶段程序并不直接链接动态库，而是通过接口动态加载。</li>
<li>灵活性高:</li>
<li>支持插件机制：程序可以在运行时决定加载哪些库。</li>
<li>可以避免在程序中硬编码动态库依赖。</li>
<li>手动管理加载和卸载:</li>
<li>程序员需要显式调用加载（<code>LoadLibrary</code> 或 <code>dlopen</code>）和卸载（<code>FreeLibrary</code> 或 <code>dlclose</code>）函数。</li>
<li>更高的复杂性:</li>
<li>程序需要额外的逻辑来处理加载失败、符号解析等问题。</li>
</ol>
<h4 id="_39"><strong>适用场景</strong><a class="headerlink" href="#_39" title="Permanent link">&para;</a></h4>
<ul>
<li>插件系统：程序运行时按需加载不同的插件。</li>
<li>灵活扩展：允许后续扩展功能，而不需要修改和重新编译主程序。</li>
<li>多版本兼容：可以动态选择加载不同版本的动态库。</li>
</ul>
<hr />
<h3 id="_40"><strong>动态库的静态链接</strong><a class="headerlink" href="#_40" title="Permanent link">&para;</a></h3>
<h4 id="_41"><strong>定义</strong><a class="headerlink" href="#_41" title="Permanent link">&para;</a></h4>
<p>程序在编译和链接阶段使用动态库的导入库（<code>.lib</code> 或 <code>.a</code>），并在运行时依赖动态库提供实际实现。</p>
<h4 id="_42"><strong>工作原理</strong><a class="headerlink" href="#_42" title="Permanent link">&para;</a></h4>
<ul>
<li>程序编译时，需要提供动态库的头文件和导入库（<code>libXYZ.lib</code> 或 <code>libXYZ.a</code>）。</li>
<li>链接阶段，程序链接导入库，生成可执行文件。</li>
<li>程序运行时，操作系统会自动加载动态库，提供实现。</li>
</ul>
<h4 id="_43"><strong>特点</strong><a class="headerlink" href="#_43" title="Permanent link">&para;</a></h4>
<ol>
<li>编译时绑定:</li>
<li>动态库的接口符号在编译阶段被绑定到程序。</li>
<li>可执行文件依赖动态库在运行时存在，但无需手动加载。</li>
<li>自动加载:</li>
<li>动态库在程序启动时由操作系统自动加载，无需显式调用加载函数。</li>
<li>更简单的使用方式:</li>
<li>程序无需编写额外代码管理动态库的加载和卸载。</li>
<li>直接通过头文件和编译时绑定的接口调用动态库中的函数。</li>
<li>运行时依赖性明确:</li>
<li>程序需要动态库的实际文件存在于运行环境中，通常通过路径（如 <code>PATH</code> 或 <code>LD_LIBRARY_PATH</code>）查找。</li>
<li>可能导致依赖问题:</li>
<li>如果动态库版本不匹配或丢失，程序可能无法启动。</li>
</ol>
<h4 id="_44"><strong>适用场景</strong><a class="headerlink" href="#_44" title="Permanent link">&para;</a></h4>
<ul>
<li>程序确定依赖的动态库，并且动态库在运行时始终可用。</li>
<li>程序无需复杂的插件机制或按需加载。</li>
</ul>
<hr />
<h3 id="_45"><strong>对比总结</strong><a class="headerlink" href="#_45" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>特性</th>
<th>动态库的动态链接</th>
<th>动态库的静态链接</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>链接时机</strong></td>
<td>程序运行时（动态加载）</td>
<td>程序编译时（静态链接符号）</td>
</tr>
<tr>
<td><strong>加载方式</strong></td>
<td>手动调用加载函数</td>
<td>操作系统自动加载动态库</td>
</tr>
<tr>
<td><strong>使用复杂性</strong></td>
<td>程序需要额外处理加载、符号解析等逻辑</td>
<td>直接调用动态库接口，简单易用</td>
</tr>
<tr>
<td><strong>运行时依赖</strong></td>
<td>程序运行时可灵活决定是否加载动态库</td>
<td>程序运行时需要动态库文件</td>
</tr>
<tr>
<td><strong>灵活性</strong></td>
<td>高，可用于插件机制或条件加载</td>
<td>较低，依赖在编译时固定的动态库</td>
</tr>
<tr>
<td><strong>启动效率</strong></td>
<td>程序启动时加载时间较快，但运行中可能加载动态库</td>
<td>程序启动时加载动态库，启动时间可能更长</td>
</tr>
<tr>
<td><strong>适用场景</strong></td>
<td>插件、扩展机制、按需加载</td>
<td>确定性依赖的动态库</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="_46"><strong>结论</strong><a class="headerlink" href="#_46" title="Permanent link">&para;</a></h3>
<ul>
<li>如果需要灵活性（如插件系统、按需加载），选择 <strong>动态库的动态链接</strong>。</li>
<li>如果动态库依赖是固定的且运行环境中始终存在，选择 <strong>动态库的静态链接</strong>。</li>
</ul>
<h2 id="125base_typeshbase_pluginhccc">125、base_types.h和base_plugin.h这两个其他模块（包括C和C++）需要频繁使用的东西，被我弄成了纯C代码<a class="headerlink" href="#125base_typeshbase_pluginhccc" title="Permanent link">&para;</a></h2>
<h1 id="_47">待解决疑问点<a class="headerlink" href="#_47" title="Permanent link">&para;</a></h1>
<p>1、如果仅仅是core_base自己内部需要使用的头文件，是否可以不用在base.h里面include该头文件</p>
<h1 id="apr_1">apr库的修改<a class="headerlink" href="#apr_1" title="Permanent link">&para;</a></h1>
<p>我自己手动复制了apr.hw文件内容到apr.h文件</p>
<p>apr库的cmake文件把test的option(APR_BUILD_TESTAPR "Build the test suite" OFF)关掉，然后需要删除out
为了展示如何管理多个插件，并且支持插件间通过核心模块进行通信，我们需要编写两个独立的插件，并在主程序中加载它们。以下是详细的实现步骤。</p>
<h2 id="tmp">tmp<a class="headerlink" href="#tmp" title="Permanent link">&para;</a></h2>
<h3 id="1_8">1. 定义核心模块接口<a class="headerlink" href="#1_8" title="Permanent link">&para;</a></h3>
<p><strong>core.h</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="cp">#ifndef CORE_H</span>
<a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a><span class="cp">#define CORE_H</span>
<a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a>
<a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;apr-1/apr_pools.h&gt;</span>
<a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;apr-1/apr_hash.h&gt;</span>
<a id="__codelineno-53-6" name="__codelineno-53-6" href="#__codelineno-53-6"></a>
<a id="__codelineno-53-7" name="__codelineno-53-7" href="#__codelineno-53-7"></a><span class="k">typedef</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">core_callback_t</span><span class="p">)(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">message</span><span class="p">);</span>
<a id="__codelineno-53-8" name="__codelineno-53-8" href="#__codelineno-53-8"></a>
<a id="__codelineno-53-9" name="__codelineno-53-9" href="#__codelineno-53-9"></a><span class="kt">void</span><span class="w"> </span><span class="nf">core_initialize</span><span class="p">(</span><span class="n">apr_pool_t</span><span class="w"> </span><span class="o">*</span><span class="n">pool</span><span class="p">);</span>
<a id="__codelineno-53-10" name="__codelineno-53-10" href="#__codelineno-53-10"></a><span class="kt">void</span><span class="w"> </span><span class="nf">core_shutdown</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<a id="__codelineno-53-11" name="__codelineno-53-11" href="#__codelineno-53-11"></a><span class="kt">void</span><span class="w"> </span><span class="nf">core_register_callback</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">core_callback_t</span><span class="w"> </span><span class="n">cb</span><span class="p">);</span>
<a id="__codelineno-53-12" name="__codelineno-53-12" href="#__codelineno-53-12"></a><span class="kt">void</span><span class="w"> </span><span class="nf">core_invoke_callback</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">message</span><span class="p">);</span>
<a id="__codelineno-53-13" name="__codelineno-53-13" href="#__codelineno-53-13"></a>
<a id="__codelineno-53-14" name="__codelineno-53-14" href="#__codelineno-53-14"></a><span class="cp">#endif </span><span class="c1">// CORE_H</span>
</code></pre></div>
<h3 id="2_6">2. 实现核心模块<a class="headerlink" href="#2_6" title="Permanent link">&para;</a></h3>
<p><strong>core.c</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;core.h&quot;</span>
<a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a>
<a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a><span class="k">static</span><span class="w"> </span><span class="n">apr_pool_t</span><span class="w"> </span><span class="o">*</span><span class="n">core_pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a><span class="k">static</span><span class="w"> </span><span class="n">apr_hash_t</span><span class="w"> </span><span class="o">*</span><span class="n">callbacks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<a id="__codelineno-54-6" name="__codelineno-54-6" href="#__codelineno-54-6"></a>
<a id="__codelineno-54-7" name="__codelineno-54-7" href="#__codelineno-54-7"></a><span class="kt">void</span><span class="w"> </span><span class="nf">core_initialize</span><span class="p">(</span><span class="n">apr_pool_t</span><span class="w"> </span><span class="o">*</span><span class="n">pool</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-54-8" name="__codelineno-54-8" href="#__codelineno-54-8"></a><span class="w">    </span><span class="n">core_pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pool</span><span class="p">;</span>
<a id="__codelineno-54-9" name="__codelineno-54-9" href="#__codelineno-54-9"></a><span class="w">    </span><span class="n">callbacks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">apr_hash_make</span><span class="p">(</span><span class="n">core_pool</span><span class="p">);</span>
<a id="__codelineno-54-10" name="__codelineno-54-10" href="#__codelineno-54-10"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Core initialized.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<a id="__codelineno-54-11" name="__codelineno-54-11" href="#__codelineno-54-11"></a><span class="p">}</span>
<a id="__codelineno-54-12" name="__codelineno-54-12" href="#__codelineno-54-12"></a>
<a id="__codelineno-54-13" name="__codelineno-54-13" href="#__codelineno-54-13"></a><span class="kt">void</span><span class="w"> </span><span class="nf">core_shutdown</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-54-14" name="__codelineno-54-14" href="#__codelineno-54-14"></a><span class="w">    </span><span class="n">callbacks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<a id="__codelineno-54-15" name="__codelineno-54-15" href="#__codelineno-54-15"></a><span class="w">    </span><span class="n">core_pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<a id="__codelineno-54-16" name="__codelineno-54-16" href="#__codelineno-54-16"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Core shutdown.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<a id="__codelineno-54-17" name="__codelineno-54-17" href="#__codelineno-54-17"></a><span class="p">}</span>
<a id="__codelineno-54-18" name="__codelineno-54-18" href="#__codelineno-54-18"></a>
<a id="__codelineno-54-19" name="__codelineno-54-19" href="#__codelineno-54-19"></a><span class="kt">void</span><span class="w"> </span><span class="nf">core_register_callback</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">core_callback_t</span><span class="w"> </span><span class="n">cb</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-54-20" name="__codelineno-54-20" href="#__codelineno-54-20"></a><span class="w">    </span><span class="n">apr_hash_set</span><span class="p">(</span><span class="n">callbacks</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">APR_HASH_KEY_STRING</span><span class="p">,</span><span class="w"> </span><span class="n">cb</span><span class="p">);</span>
<a id="__codelineno-54-21" name="__codelineno-54-21" href="#__codelineno-54-21"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Callback &#39;%s&#39; registered.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">);</span>
<a id="__codelineno-54-22" name="__codelineno-54-22" href="#__codelineno-54-22"></a><span class="p">}</span>
<a id="__codelineno-54-23" name="__codelineno-54-23" href="#__codelineno-54-23"></a>
<a id="__codelineno-54-24" name="__codelineno-54-24" href="#__codelineno-54-24"></a><span class="kt">void</span><span class="w"> </span><span class="nf">core_invoke_callback</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-54-25" name="__codelineno-54-25" href="#__codelineno-54-25"></a><span class="w">    </span><span class="n">core_callback_t</span><span class="w"> </span><span class="n">cb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">apr_hash_get</span><span class="p">(</span><span class="n">callbacks</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">APR_HASH_KEY_STRING</span><span class="p">);</span>
<a id="__codelineno-54-26" name="__codelineno-54-26" href="#__codelineno-54-26"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cb</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-54-27" name="__codelineno-54-27" href="#__codelineno-54-27"></a><span class="w">        </span><span class="n">cb</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
<a id="__codelineno-54-28" name="__codelineno-54-28" href="#__codelineno-54-28"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-54-29" name="__codelineno-54-29" href="#__codelineno-54-29"></a><span class="p">}</span>
</code></pre></div>
<h3 id="3_5">3. 定义插件接口<a class="headerlink" href="#3_5" title="Permanent link">&para;</a></h3>
<p><strong>plugin.h</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="cp">#ifndef PLUGIN_H</span>
<a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a><span class="cp">#define PLUGIN_H</span>
<a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a>
<a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;core.h&quot;</span>
<a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a>
<a id="__codelineno-55-6" name="__codelineno-55-6" href="#__codelineno-55-6"></a><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-55-7" name="__codelineno-55-7" href="#__codelineno-55-7"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">initialize</span><span class="p">)(</span><span class="n">apr_pool_t</span><span class="w"> </span><span class="o">*</span><span class="n">pool</span><span class="p">);</span>
<a id="__codelineno-55-8" name="__codelineno-55-8" href="#__codelineno-55-8"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">shutdown</span><span class="p">)(</span><span class="kt">void</span><span class="p">);</span>
<a id="__codelineno-55-9" name="__codelineno-55-9" href="#__codelineno-55-9"></a><span class="p">}</span><span class="w"> </span><span class="n">plugin_t</span><span class="p">;</span>
<a id="__codelineno-55-10" name="__codelineno-55-10" href="#__codelineno-55-10"></a>
<a id="__codelineno-55-11" name="__codelineno-55-11" href="#__codelineno-55-11"></a><span class="cp">#endif </span><span class="c1">// PLUGIN_H</span>
</code></pre></div>
<h3 id="4_3">4. 实现第一个插件<a class="headerlink" href="#4_3" title="Permanent link">&para;</a></h3>
<p><strong>plugin1.c</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;plugin.h&quot;</span>
<a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a>
<a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">plugin1_initialize</span><span class="p">(</span><span class="n">apr_pool_t</span><span class="w"> </span><span class="o">*</span><span class="n">pool</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a><span class="w">    </span><span class="n">core_register_callback</span><span class="p">(</span><span class="s">&quot;plugin1_callback&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">core_callback_t</span><span class="p">)</span><span class="n">printf</span><span class="p">);</span>
<a id="__codelineno-56-6" name="__codelineno-56-6" href="#__codelineno-56-6"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Plugin1 initialized</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<a id="__codelineno-56-7" name="__codelineno-56-7" href="#__codelineno-56-7"></a><span class="p">}</span>
<a id="__codelineno-56-8" name="__codelineno-56-8" href="#__codelineno-56-8"></a>
<a id="__codelineno-56-9" name="__codelineno-56-9" href="#__codelineno-56-9"></a><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">plugin1_shutdown</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-56-10" name="__codelineno-56-10" href="#__codelineno-56-10"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Plugin1 shutdown</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<a id="__codelineno-56-11" name="__codelineno-56-11" href="#__codelineno-56-11"></a><span class="p">}</span>
<a id="__codelineno-56-12" name="__codelineno-56-12" href="#__codelineno-56-12"></a>
<a id="__codelineno-56-13" name="__codelineno-56-13" href="#__codelineno-56-13"></a><span class="n">plugin_t</span><span class="w"> </span><span class="n">plugin1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-56-14" name="__codelineno-56-14" href="#__codelineno-56-14"></a><span class="w">    </span><span class="p">.</span><span class="n">initialize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plugin1_initialize</span><span class="p">,</span>
<a id="__codelineno-56-15" name="__codelineno-56-15" href="#__codelineno-56-15"></a><span class="w">    </span><span class="p">.</span><span class="n">shutdown</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plugin1_shutdown</span>
<a id="__codelineno-56-16" name="__codelineno-56-16" href="#__codelineno-56-16"></a><span class="p">};</span>
<a id="__codelineno-56-17" name="__codelineno-56-17" href="#__codelineno-56-17"></a>
<a id="__codelineno-56-18" name="__codelineno-56-18" href="#__codelineno-56-18"></a><span class="n">plugin_t</span><span class="o">*</span><span class="w"> </span><span class="nf">get_plugin</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-56-19" name="__codelineno-56-19" href="#__codelineno-56-19"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="n">plugin1</span><span class="p">;</span>
<a id="__codelineno-56-20" name="__codelineno-56-20" href="#__codelineno-56-20"></a><span class="p">}</span>
</code></pre></div>
<h3 id="5_2">5. 实现第二个插件<a class="headerlink" href="#5_2" title="Permanent link">&para;</a></h3>
<p><strong>plugin2.c</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;plugin.h&quot;</span>
<a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a>
<a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">plugin2_initialize</span><span class="p">(</span><span class="n">apr_pool_t</span><span class="w"> </span><span class="o">*</span><span class="n">pool</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a><span class="w">    </span><span class="n">core_register_callback</span><span class="p">(</span><span class="s">&quot;plugin2_callback&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">core_callback_t</span><span class="p">)</span><span class="n">printf</span><span class="p">);</span>
<a id="__codelineno-57-6" name="__codelineno-57-6" href="#__codelineno-57-6"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Plugin2 initialized</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<a id="__codelineno-57-7" name="__codelineno-57-7" href="#__codelineno-57-7"></a><span class="p">}</span>
<a id="__codelineno-57-8" name="__codelineno-57-8" href="#__codelineno-57-8"></a>
<a id="__codelineno-57-9" name="__codelineno-57-9" href="#__codelineno-57-9"></a><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">plugin2_shutdown</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-10" name="__codelineno-57-10" href="#__codelineno-57-10"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Plugin2 shutdown</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<a id="__codelineno-57-11" name="__codelineno-57-11" href="#__codelineno-57-11"></a><span class="p">}</span>
<a id="__codelineno-57-12" name="__codelineno-57-12" href="#__codelineno-57-12"></a>
<a id="__codelineno-57-13" name="__codelineno-57-13" href="#__codelineno-57-13"></a><span class="n">plugin_t</span><span class="w"> </span><span class="n">plugin2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-14" name="__codelineno-57-14" href="#__codelineno-57-14"></a><span class="w">    </span><span class="p">.</span><span class="n">initialize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plugin2_initialize</span><span class="p">,</span>
<a id="__codelineno-57-15" name="__codelineno-57-15" href="#__codelineno-57-15"></a><span class="w">    </span><span class="p">.</span><span class="n">shutdown</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plugin2_shutdown</span>
<a id="__codelineno-57-16" name="__codelineno-57-16" href="#__codelineno-57-16"></a><span class="p">};</span>
<a id="__codelineno-57-17" name="__codelineno-57-17" href="#__codelineno-57-17"></a>
<a id="__codelineno-57-18" name="__codelineno-57-18" href="#__codelineno-57-18"></a><span class="n">plugin_t</span><span class="o">*</span><span class="w"> </span><span class="nf">get_plugin</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-19" name="__codelineno-57-19" href="#__codelineno-57-19"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="n">plugin2</span><span class="p">;</span>
<a id="__codelineno-57-20" name="__codelineno-57-20" href="#__codelineno-57-20"></a><span class="p">}</span>
</code></pre></div>
<h3 id="6_1">6. 实现插件框架<a class="headerlink" href="#6_1" title="Permanent link">&para;</a></h3>
<p><strong>plugin_framework.h</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="cp">#ifndef PLUGIN_FRAMEWORK_H</span>
<a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a><span class="cp">#define PLUGIN_FRAMEWORK_H</span>
<a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a>
<a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;plugin.h&quot;</span>
<a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;apr-1/apr_dso.h&gt;</span>
<a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a>
<a id="__codelineno-58-7" name="__codelineno-58-7" href="#__codelineno-58-7"></a><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-58-8" name="__codelineno-58-8" href="#__codelineno-58-8"></a><span class="w">    </span><span class="n">apr_dso_handle_t</span><span class="w"> </span><span class="o">*</span><span class="n">dso</span><span class="p">;</span>
<a id="__codelineno-58-9" name="__codelineno-58-9" href="#__codelineno-58-9"></a><span class="w">    </span><span class="n">plugin_t</span><span class="w"> </span><span class="o">*</span><span class="n">plugin</span><span class="p">;</span>
<a id="__codelineno-58-10" name="__codelineno-58-10" href="#__codelineno-58-10"></a><span class="p">}</span><span class="w"> </span><span class="n">plugin_handle_t</span><span class="p">;</span>
<a id="__codelineno-58-11" name="__codelineno-58-11" href="#__codelineno-58-11"></a>
<a id="__codelineno-58-12" name="__codelineno-58-12" href="#__codelineno-58-12"></a><span class="kt">int</span><span class="w"> </span><span class="nf">load_plugin</span><span class="p">(</span><span class="n">plugin_handle_t</span><span class="w"> </span><span class="o">*</span><span class="n">handle</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="n">apr_pool_t</span><span class="w"> </span><span class="o">*</span><span class="n">pool</span><span class="p">);</span>
<a id="__codelineno-58-13" name="__codelineno-58-13" href="#__codelineno-58-13"></a><span class="kt">void</span><span class="w"> </span><span class="nf">unload_plugin</span><span class="p">(</span><span class="n">plugin_handle_t</span><span class="w"> </span><span class="o">*</span><span class="n">handle</span><span class="p">);</span>
<a id="__codelineno-58-14" name="__codelineno-58-14" href="#__codelineno-58-14"></a>
<a id="__codelineno-58-15" name="__codelineno-58-15" href="#__codelineno-58-15"></a><span class="cp">#endif </span><span class="c1">// PLUGIN_FRAMEWORK_H</span>
</code></pre></div>
<p><strong>plugin_framework.c</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;plugin_framework.h&quot;</span>
<a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a>
<a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a><span class="k">typedef</span><span class="w"> </span><span class="n">plugin_t</span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">get_plugin_func_t</span><span class="p">)(</span><span class="kt">void</span><span class="p">);</span>
<a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a>
<a id="__codelineno-59-6" name="__codelineno-59-6" href="#__codelineno-59-6"></a><span class="kt">int</span><span class="w"> </span><span class="nf">load_plugin</span><span class="p">(</span><span class="n">plugin_handle_t</span><span class="w"> </span><span class="o">*</span><span class="n">handle</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="n">apr_pool_t</span><span class="w"> </span><span class="o">*</span><span class="n">pool</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-59-7" name="__codelineno-59-7" href="#__codelineno-59-7"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">apr_dso_load</span><span class="p">(</span><span class="o">&amp;</span><span class="n">handle</span><span class="o">-&gt;</span><span class="n">dso</span><span class="p">,</span><span class="w"> </span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="n">pool</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">APR_SUCCESS</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-59-8" name="__codelineno-59-8" href="#__codelineno-59-8"></a><span class="w">        </span><span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Failed to load plugin: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">path</span><span class="p">);</span>
<a id="__codelineno-59-9" name="__codelineno-59-9" href="#__codelineno-59-9"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<a id="__codelineno-59-10" name="__codelineno-59-10" href="#__codelineno-59-10"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-59-11" name="__codelineno-59-11" href="#__codelineno-59-11"></a>
<a id="__codelineno-59-12" name="__codelineno-59-12" href="#__codelineno-59-12"></a><span class="w">    </span><span class="n">get_plugin_func_t</span><span class="w"> </span><span class="n">get_plugin</span><span class="p">;</span>
<a id="__codelineno-59-13" name="__codelineno-59-13" href="#__codelineno-59-13"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">apr_dso_sym</span><span class="p">((</span><span class="n">apr_dso_handle_sym_t</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">get_plugin</span><span class="p">,</span><span class="w"> </span><span class="n">handle</span><span class="o">-&gt;</span><span class="n">dso</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;get_plugin&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">APR_SUCCESS</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-59-14" name="__codelineno-59-14" href="#__codelineno-59-14"></a><span class="w">        </span><span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Failed to find symbol: get_plugin</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<a id="__codelineno-59-15" name="__codelineno-59-15" href="#__codelineno-59-15"></a><span class="w">        </span><span class="n">apr_dso_unload</span><span class="p">(</span><span class="n">handle</span><span class="o">-&gt;</span><span class="n">dso</span><span class="p">);</span>
<a id="__codelineno-59-16" name="__codelineno-59-16" href="#__codelineno-59-16"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<a id="__codelineno-59-17" name="__codelineno-59-17" href="#__codelineno-59-17"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-59-18" name="__codelineno-59-18" href="#__codelineno-59-18"></a>
<a id="__codelineno-59-19" name="__codelineno-59-19" href="#__codelineno-59-19"></a><span class="w">    </span><span class="n">handle</span><span class="o">-&gt;</span><span class="n">plugin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_plugin</span><span class="p">();</span>
<a id="__codelineno-59-20" name="__codelineno-59-20" href="#__codelineno-59-20"></a><span class="w">    </span><span class="n">handle</span><span class="o">-&gt;</span><span class="n">plugin</span><span class="o">-&gt;</span><span class="n">initialize</span><span class="p">(</span><span class="n">pool</span><span class="p">);</span>
<a id="__codelineno-59-21" name="__codelineno-59-21" href="#__codelineno-59-21"></a>
<a id="__codelineno-59-22" name="__codelineno-59-22" href="#__codelineno-59-22"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-59-23" name="__codelineno-59-23" href="#__codelineno-59-23"></a><span class="p">}</span>
<a id="__codelineno-59-24" name="__codelineno-59-24" href="#__codelineno-59-24"></a>
<a id="__codelineno-59-25" name="__codelineno-59-25" href="#__codelineno-59-25"></a><span class="kt">void</span><span class="w"> </span><span class="nf">unload_plugin</span><span class="p">(</span><span class="n">plugin_handle_t</span><span class="w"> </span><span class="o">*</span><span class="n">handle</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-59-26" name="__codelineno-59-26" href="#__codelineno-59-26"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">handle</span><span class="o">-&gt;</span><span class="n">plugin</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-59-27" name="__codelineno-59-27" href="#__codelineno-59-27"></a><span class="w">        </span><span class="n">handle</span><span class="o">-&gt;</span><span class="n">plugin</span><span class="o">-&gt;</span><span class="n">shutdown</span><span class="p">();</span>
<a id="__codelineno-59-28" name="__codelineno-59-28" href="#__codelineno-59-28"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-59-29" name="__codelineno-59-29" href="#__codelineno-59-29"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">handle</span><span class="o">-&gt;</span><span class="n">dso</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-59-30" name="__codelineno-59-30" href="#__codelineno-59-30"></a><span class="w">        </span><span class="n">apr_dso_unload</span><span class="p">(</span><span class="n">handle</span><span class="o">-&gt;</span><span class="n">dso</span><span class="p">);</span>
<a id="__codelineno-59-31" name="__codelineno-59-31" href="#__codelineno-59-31"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-59-32" name="__codelineno-59-32" href="#__codelineno-59-32"></a><span class="p">}</span>
</code></pre></div>
<h3 id="7">7. 编写主程序<a class="headerlink" href="#7" title="Permanent link">&para;</a></h3>
<p><strong>main.c</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;core.h&quot;</span>
<a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;plugin_framework.h&quot;</span>
<a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;apr-1/apr_general.h&gt;</span>
<a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;apr-1/apr_pools.h&gt;</span>
<a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a>
<a id="__codelineno-60-6" name="__codelineno-60-6" href="#__codelineno-60-6"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-60-7" name="__codelineno-60-7" href="#__codelineno-60-7"></a><span class="w">    </span><span class="n">apr_initialize</span><span class="p">();</span>
<a id="__codelineno-60-8" name="__codelineno-60-8" href="#__codelineno-60-8"></a><span class="w">    </span><span class="n">apr_pool_t</span><span class="w"> </span><span class="o">*</span><span class="n">pool</span><span class="p">;</span>
<a id="__codelineno-60-9" name="__codelineno-60-9" href="#__codelineno-60-9"></a><span class="w">    </span><span class="n">apr_pool_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pool</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<a id="__codelineno-60-10" name="__codelineno-60-10" href="#__codelineno-60-10"></a>
<a id="__codelineno-60-11" name="__codelineno-60-11" href="#__codelineno-60-11"></a><span class="w">    </span><span class="n">core_initialize</span><span class="p">(</span><span class="n">pool</span><span class="p">);</span>
<a id="__codelineno-60-12" name="__codelineno-60-12" href="#__codelineno-60-12"></a>
<a id="__codelineno-60-13" name="__codelineno-60-13" href="#__codelineno-60-13"></a><span class="w">    </span><span class="n">plugin_handle_t</span><span class="w"> </span><span class="n">handle1</span><span class="p">,</span><span class="w"> </span><span class="n">handle2</span><span class="p">;</span>
<a id="__codelineno-60-14" name="__codelineno-60-14" href="#__codelineno-60-14"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">load_plugin</span><span class="p">(</span><span class="o">&amp;</span><span class="n">handle1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;./plugin1.so&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">pool</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-60-15" name="__codelineno-60-15" href="#__codelineno-60-15"></a><span class="w">        </span><span class="n">apr_pool_destroy</span><span class="p">(</span><span class="n">pool</span><span class="p">);</span>
<a id="__codelineno-60-16" name="__codelineno-60-16" href="#__codelineno-60-16"></a><span class="w">        </span><span class="n">apr_terminate</span><span class="p">();</span>
<a id="__codelineno-60-17" name="__codelineno-60-17" href="#__codelineno-60-17"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<a id="__codelineno-60-18" name="__codelineno-60-18" href="#__codelineno-60-18"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-60-19" name="__codelineno-60-19" href="#__codelineno-60-19"></a>
<a id="__codelineno-60-20" name="__codelineno-60-20" href="#__codelineno-60-20"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">load_plugin</span><span class="p">(</span><span class="o">&amp;</span><span class="n">handle2</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;./plugin2.so&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">pool</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-60-21" name="__codelineno-60-21" href="#__codelineno-60-21"></a><span class="w">        </span><span class="n">unload_plugin</span><span class="p">(</span><span class="o">&amp;</span><span class="n">handle1</span><span class="p">);</span>
<a id="__codelineno-60-22" name="__codelineno-60-22" href="#__codelineno-60-22"></a><span class="w">        </span><span class="n">apr_pool_destroy</span><span class="p">(</span><span class="n">pool</span><span class="p">);</span>
<a id="__codelineno-60-23" name="__codelineno-60-23" href="#__codelineno-60-23"></a><span class="w">        </span><span class="n">apr_terminate</span><span class="p">();</span>
<a id="__codelineno-60-24" name="__codelineno-60-24" href="#__codelineno-60-24"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<a id="__codelineno-60-25" name="__codelineno-60-25" href="#__codelineno-60-25"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-60-26" name="__codelineno-60-26" href="#__codelineno-60-26"></a>
<a id="__codelineno-60-27" name="__codelineno-60-27" href="#__codelineno-60-27"></a><span class="w">    </span><span class="n">core_invoke_callback</span><span class="p">(</span><span class="s">&quot;plugin1_callback&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello from main to Plugin1&quot;</span><span class="p">);</span>
<a id="__codelineno-60-28" name="__codelineno-60-28" href="#__codelineno-60-28"></a><span class="w">    </span><span class="n">core_invoke_callback</span><span class="p">(</span><span class="s">&quot;plugin2_callback&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello from main to Plugin2&quot;</span><span class="p">);</span>
<a id="__codelineno-60-29" name="__codelineno-60-29" href="#__codelineno-60-29"></a>
<a id="__codelineno-60-30" name="__codelineno-60-30" href="#__codelineno-60-30"></a><span class="w">    </span><span class="n">unload_plugin</span><span class="p">(</span><span class="o">&amp;</span><span class="n">handle2</span><span class="p">);</span>
<a id="__codelineno-60-31" name="__codelineno-60-31" href="#__codelineno-60-31"></a><span class="w">    </span><span class="n">unload_plugin</span><span class="p">(</span><span class="o">&amp;</span><span class="n">handle1</span><span class="p">);</span>
<a id="__codelineno-60-32" name="__codelineno-60-32" href="#__codelineno-60-32"></a><span class="w">    </span><span class="n">core_shutdown</span><span class="p">();</span>
<a id="__codelineno-60-33" name="__codelineno-60-33" href="#__codelineno-60-33"></a>
<a id="__codelineno-60-34" name="__codelineno-60-34" href="#__codelineno-60-34"></a><span class="w">    </span><span class="n">apr_pool_destroy</span><span class="p">(</span><span class="n">pool</span><span class="p">);</span>
<a id="__codelineno-60-35" name="__codelineno-60-35" href="#__codelineno-60-35"></a><span class="w">    </span><span class="n">apr_terminate</span><span class="p">();</span>
<a id="__codelineno-60-36" name="__codelineno-60-36" href="#__codelineno-60-36"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-60-37" name="__codelineno-60-37" href="#__codelineno-60-37"></a><span class="p">}</span>
</code></pre></div>
<h3 id="8">8. 编译和运行<a class="headerlink" href="#8" title="Permanent link">&para;</a></h3>
<p>编译插件和主程序：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a>gcc<span class="w"> </span>-shared<span class="w"> </span>-o<span class="w"> </span>plugin1.so<span class="w"> </span>plugin1.c<span class="w"> </span>-fPIC<span class="w"> </span><span class="k">$(</span>apr-1-config<span class="w"> </span>--cflags<span class="w"> </span>--libs<span class="k">)</span>
<a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a>gcc<span class="w"> </span>-shared<span class="w"> </span>-o<span class="w"> </span>plugin2.so<span class="w"> </span>plugin2.c<span class="w"> </span>-fPIC<span class="w"> </span><span class="k">$(</span>apr-1-config<span class="w"> </span>--cflags<span class="w"> </span>--libs<span class="k">)</span>
<a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a>gcc<span class="w"> </span>-o<span class="w"> </span>main<span class="w"> </span>main.c<span class="w"> </span>core.c<span class="w"> </span>plugin_framework.c<span class="w"> </span><span class="k">$(</span>apr-1-config<span class="w"> </span>--cflags<span class="w"> </span>--libs<span class="k">)</span>
<a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a>./main
</code></pre></div>
<h3 id="_48">总结<a class="headerlink" href="#_48" title="Permanent link">&para;</a></h3>
<p>这个示例展示了如何使用 APR 实现一个核心模块和多个动态加载模块，并通过核心模块进行模块间通信。APR 提供了跨平台的动态库加载功能，使得这种实现变得相对简单和高效。通过这种方法，可以实现一个模块化的系统，方便插件的开发和管理。</p>
<h2 id="tmp2">tmp2<a class="headerlink" href="#tmp2" title="Permanent link">&para;</a></h2>
<p>以下是一个完整的示例，演示了如何实现多个插件，并在插件之间进行通信：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="c1">// plugin_interface.h</span>
<a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a>
<a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a><span class="cp">#ifdef __cplusplus</span>
<a id="__codelineno-62-4" name="__codelineno-62-4" href="#__codelineno-62-4"></a><span class="k">extern</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-5" name="__codelineno-62-5" href="#__codelineno-62-5"></a><span class="cp">#endif</span>
<a id="__codelineno-62-6" name="__codelineno-62-6" href="#__codelineno-62-6"></a>
<a id="__codelineno-62-7" name="__codelineno-62-7" href="#__codelineno-62-7"></a><span class="c1">// 定义C接口的插件接口结构体</span>
<a id="__codelineno-62-8" name="__codelineno-62-8" href="#__codelineno-62-8"></a><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-9" name="__codelineno-62-9" href="#__codelineno-62-9"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">initialize</span><span class="p">)(</span><span class="kt">void</span><span class="p">);</span><span class="w">  </span><span class="c1">// 初始化函数指针</span>
<a id="__codelineno-62-10" name="__codelineno-62-10" href="#__codelineno-62-10"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">process</span><span class="p">)(</span><span class="kt">void</span><span class="p">);</span><span class="w">     </span><span class="c1">// 处理函数指针</span>
<a id="__codelineno-62-11" name="__codelineno-62-11" href="#__codelineno-62-11"></a><span class="p">}</span><span class="w"> </span><span class="n">PluginInterface</span><span class="p">;</span>
<a id="__codelineno-62-12" name="__codelineno-62-12" href="#__codelineno-62-12"></a>
<a id="__codelineno-62-13" name="__codelineno-62-13" href="#__codelineno-62-13"></a><span class="cp">#ifdef __cplusplus</span>
<a id="__codelineno-62-14" name="__codelineno-62-14" href="#__codelineno-62-14"></a><span class="p">}</span>
<a id="__codelineno-62-15" name="__codelineno-62-15" href="#__codelineno-62-15"></a><span class="cp">#endif</span>
<a id="__codelineno-62-16" name="__codelineno-62-16" href="#__codelineno-62-16"></a>
<a id="__codelineno-62-17" name="__codelineno-62-17" href="#__codelineno-62-17"></a><span class="c1">// plugin1.cpp</span>
<a id="__codelineno-62-18" name="__codelineno-62-18" href="#__codelineno-62-18"></a>
<a id="__codelineno-62-19" name="__codelineno-62-19" href="#__codelineno-62-19"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<a id="__codelineno-62-20" name="__codelineno-62-20" href="#__codelineno-62-20"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;plugin_interface.h&quot;</span>
<a id="__codelineno-62-21" name="__codelineno-62-21" href="#__codelineno-62-21"></a>
<a id="__codelineno-62-22" name="__codelineno-62-22" href="#__codelineno-62-22"></a><span class="c1">// 实现插件1</span>
<a id="__codelineno-62-23" name="__codelineno-62-23" href="#__codelineno-62-23"></a><span class="k">class</span><span class="w"> </span><span class="nc">Plugin1</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-24" name="__codelineno-62-24" href="#__codelineno-62-24"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-62-25" name="__codelineno-62-25" href="#__codelineno-62-25"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">initialize</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-26" name="__codelineno-62-26" href="#__codelineno-62-26"></a><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Plugin1 initialized&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-62-27" name="__codelineno-62-27" href="#__codelineno-62-27"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-62-28" name="__codelineno-62-28" href="#__codelineno-62-28"></a>
<a id="__codelineno-62-29" name="__codelineno-62-29" href="#__codelineno-62-29"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">process</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-30" name="__codelineno-62-30" href="#__codelineno-62-30"></a><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Plugin1 processing&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-62-31" name="__codelineno-62-31" href="#__codelineno-62-31"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-62-32" name="__codelineno-62-32" href="#__codelineno-62-32"></a><span class="p">};</span>
<a id="__codelineno-62-33" name="__codelineno-62-33" href="#__codelineno-62-33"></a>
<a id="__codelineno-62-34" name="__codelineno-62-34" href="#__codelineno-62-34"></a><span class="c1">// 将C++的实现转换为C接口</span>
<a id="__codelineno-62-35" name="__codelineno-62-35" href="#__codelineno-62-35"></a><span class="k">extern</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-36" name="__codelineno-62-36" href="#__codelineno-62-36"></a><span class="w">    </span><span class="n">PluginInterface</span><span class="w"> </span><span class="n">plugin1_interface</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-37" name="__codelineno-62-37" href="#__codelineno-62-37"></a><span class="w">        </span><span class="p">.</span><span class="n">initialize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Plugin1</span><span class="o">::</span><span class="n">initialize</span><span class="p">,</span>
<a id="__codelineno-62-38" name="__codelineno-62-38" href="#__codelineno-62-38"></a><span class="w">        </span><span class="p">.</span><span class="n">process</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Plugin1</span><span class="o">::</span><span class="n">process</span>
<a id="__codelineno-62-39" name="__codelineno-62-39" href="#__codelineno-62-39"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-62-40" name="__codelineno-62-40" href="#__codelineno-62-40"></a><span class="p">}</span>
<a id="__codelineno-62-41" name="__codelineno-62-41" href="#__codelineno-62-41"></a>
<a id="__codelineno-62-42" name="__codelineno-62-42" href="#__codelineno-62-42"></a><span class="c1">// plugin2.cpp</span>
<a id="__codelineno-62-43" name="__codelineno-62-43" href="#__codelineno-62-43"></a>
<a id="__codelineno-62-44" name="__codelineno-62-44" href="#__codelineno-62-44"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<a id="__codelineno-62-45" name="__codelineno-62-45" href="#__codelineno-62-45"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;plugin_interface.h&quot;</span>
<a id="__codelineno-62-46" name="__codelineno-62-46" href="#__codelineno-62-46"></a>
<a id="__codelineno-62-47" name="__codelineno-62-47" href="#__codelineno-62-47"></a><span class="c1">// 实现插件2</span>
<a id="__codelineno-62-48" name="__codelineno-62-48" href="#__codelineno-62-48"></a><span class="k">class</span><span class="w"> </span><span class="nc">Plugin2</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-49" name="__codelineno-62-49" href="#__codelineno-62-49"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-62-50" name="__codelineno-62-50" href="#__codelineno-62-50"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">initialize</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-51" name="__codelineno-62-51" href="#__codelineno-62-51"></a><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Plugin2 initialized&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-62-52" name="__codelineno-62-52" href="#__codelineno-62-52"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-62-53" name="__codelineno-62-53" href="#__codelineno-62-53"></a>
<a id="__codelineno-62-54" name="__codelineno-62-54" href="#__codelineno-62-54"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">process</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-55" name="__codelineno-62-55" href="#__codelineno-62-55"></a><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Plugin2 processing&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-62-56" name="__codelineno-62-56" href="#__codelineno-62-56"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-62-57" name="__codelineno-62-57" href="#__codelineno-62-57"></a><span class="p">};</span>
<a id="__codelineno-62-58" name="__codelineno-62-58" href="#__codelineno-62-58"></a>
<a id="__codelineno-62-59" name="__codelineno-62-59" href="#__codelineno-62-59"></a><span class="c1">// 将C++的实现转换为C接口</span>
<a id="__codelineno-62-60" name="__codelineno-62-60" href="#__codelineno-62-60"></a><span class="k">extern</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-61" name="__codelineno-62-61" href="#__codelineno-62-61"></a><span class="w">    </span><span class="n">PluginInterface</span><span class="w"> </span><span class="n">plugin2_interface</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-62" name="__codelineno-62-62" href="#__codelineno-62-62"></a><span class="w">        </span><span class="p">.</span><span class="n">initialize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Plugin2</span><span class="o">::</span><span class="n">initialize</span><span class="p">,</span>
<a id="__codelineno-62-63" name="__codelineno-62-63" href="#__codelineno-62-63"></a><span class="w">        </span><span class="p">.</span><span class="n">process</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Plugin2</span><span class="o">::</span><span class="n">process</span>
<a id="__codelineno-62-64" name="__codelineno-62-64" href="#__codelineno-62-64"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-62-65" name="__codelineno-62-65" href="#__codelineno-62-65"></a><span class="p">}</span>
<a id="__codelineno-62-66" name="__codelineno-62-66" href="#__codelineno-62-66"></a>
<a id="__codelineno-62-67" name="__codelineno-62-67" href="#__codelineno-62-67"></a><span class="c1">// core.c</span>
<a id="__codelineno-62-68" name="__codelineno-62-68" href="#__codelineno-62-68"></a>
<a id="__codelineno-62-69" name="__codelineno-62-69" href="#__codelineno-62-69"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;apr_dso.h&gt;</span>
<a id="__codelineno-62-70" name="__codelineno-62-70" href="#__codelineno-62-70"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;apr_pools.h&gt;</span>
<a id="__codelineno-62-71" name="__codelineno-62-71" href="#__codelineno-62-71"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;plugin_interface.h&quot;</span>
<a id="__codelineno-62-72" name="__codelineno-62-72" href="#__codelineno-62-72"></a>
<a id="__codelineno-62-73" name="__codelineno-62-73" href="#__codelineno-62-73"></a><span class="n">apr_pool_t</span><span class="o">*</span><span class="w"> </span><span class="n">pool</span><span class="p">;</span>
<a id="__codelineno-62-74" name="__codelineno-62-74" href="#__codelineno-62-74"></a>
<a id="__codelineno-62-75" name="__codelineno-62-75" href="#__codelineno-62-75"></a><span class="c1">// 加载插件</span>
<a id="__codelineno-62-76" name="__codelineno-62-76" href="#__codelineno-62-76"></a><span class="kt">void</span><span class="w"> </span><span class="nf">load_plugin</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">plugin_path</span><span class="p">,</span><span class="w"> </span><span class="n">PluginInterface</span><span class="o">*</span><span class="w"> </span><span class="n">plugin_interface</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-77" name="__codelineno-62-77" href="#__codelineno-62-77"></a><span class="w">    </span><span class="n">apr_dso_handle_t</span><span class="o">*</span><span class="w"> </span><span class="n">dso_handle</span><span class="p">;</span>
<a id="__codelineno-62-78" name="__codelineno-62-78" href="#__codelineno-62-78"></a><span class="w">    </span><span class="n">apr_dso_sym_t</span><span class="w"> </span><span class="n">symbol</span><span class="p">;</span>
<a id="__codelineno-62-79" name="__codelineno-62-79" href="#__codelineno-62-79"></a>
<a id="__codelineno-62-80" name="__codelineno-62-80" href="#__codelineno-62-80"></a><span class="w">    </span><span class="c1">// 加载插件动态链接库</span>
<a id="__codelineno-62-81" name="__codelineno-62-81" href="#__codelineno-62-81"></a><span class="w">    </span><span class="n">apr_dso_load</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dso_handle</span><span class="p">,</span><span class="w"> </span><span class="n">plugin_path</span><span class="p">,</span><span class="w"> </span><span class="n">apr_dynamic_linker</span><span class="p">,</span><span class="w"> </span><span class="n">pool</span><span class="p">);</span>
<a id="__codelineno-62-82" name="__codelineno-62-82" href="#__codelineno-62-82"></a>
<a id="__codelineno-62-83" name="__codelineno-62-83" href="#__codelineno-62-83"></a><span class="w">    </span><span class="c1">// 获取插件接口符号</span>
<a id="__codelineno-62-84" name="__codelineno-62-84" href="#__codelineno-62-84"></a><span class="w">    </span><span class="n">apr_dso_sym</span><span class="p">(</span><span class="o">&amp;</span><span class="n">symbol</span><span class="p">,</span><span class="w"> </span><span class="n">dso_handle</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;plugin_interface&quot;</span><span class="p">);</span>
<a id="__codelineno-62-85" name="__codelineno-62-85" href="#__codelineno-62-85"></a>
<a id="__codelineno-62-86" name="__codelineno-62-86" href="#__codelineno-62-86"></a><span class="w">    </span><span class="c1">// 将符号转换为插件接口结构体</span>
<a id="__codelineno-62-87" name="__codelineno-62-87" href="#__codelineno-62-87"></a><span class="w">    </span><span class="o">*</span><span class="n">plugin_interface</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="p">(</span><span class="n">PluginInterface</span><span class="o">*</span><span class="p">)</span><span class="n">symbol</span><span class="p">;</span>
<a id="__codelineno-62-88" name="__codelineno-62-88" href="#__codelineno-62-88"></a>
<a id="__codelineno-62-89" name="__codelineno-62-89" href="#__codelineno-62-89"></a><span class="w">    </span><span class="c1">// 调用插件初始化函数</span>
<a id="__codelineno-62-90" name="__codelineno-62-90" href="#__codelineno-62-90"></a><span class="w">    </span><span class="n">plugin_interface</span><span class="o">-&gt;</span><span class="n">initialize</span><span class="p">();</span>
<a id="__codelineno-62-91" name="__codelineno-62-91" href="#__codelineno-62-91"></a><span class="p">}</span>
<a id="__codelineno-62-92" name="__codelineno-62-92" href="#__codelineno-62-92"></a>
<a id="__codelineno-62-93" name="__codelineno-62-93" href="#__codelineno-62-93"></a><span class="c1">// 卸载插件</span>
<a id="__codelineno-62-94" name="__codelineno-62-94" href="#__codelineno-62-94"></a><span class="kt">void</span><span class="w"> </span><span class="nf">unload_plugin</span><span class="p">(</span><span class="n">apr_dso_handle_t</span><span class="o">*</span><span class="w"> </span><span class="n">dso_handle</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-95" name="__codelineno-62-95" href="#__codelineno-62-95"></a><span class="w">    </span><span class="c1">// 卸载插件动态链接库</span>
<a id="__codelineno-62-96" name="__codelineno-62-96" href="#__codelineno-62-96"></a><span class="w">    </span><span class="n">apr_dso_unload</span><span class="p">(</span><span class="n">dso_handle</span><span class="p">);</span>
<a id="__codelineno-62-97" name="__codelineno-62-97" href="#__codelineno-62-97"></a><span class="p">}</span>
<a id="__codelineno-62-98" name="__codelineno-62-98" href="#__codelineno-62-98"></a>
<a id="__codelineno-62-99" name="__codelineno-62-99" href="#__codelineno-62-99"></a><span class="c1">// 使用插件功能</span>
<a id="__codelineno-62-100" name="__codelineno-62-100" href="#__codelineno-62-100"></a><span class="kt">void</span><span class="w"> </span><span class="nf">use_plugin_function</span><span class="p">(</span><span class="n">PluginInterface</span><span class="o">*</span><span class="w"> </span><span class="n">plugin_interface</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-101" name="__codelineno-62-101" href="#__codelineno-62-101"></a><span class="w">    </span><span class="c1">// 调用插件的处理函数</span>
<a id="__codelineno-62-102" name="__codelineno-62-102" href="#__codelineno-62-102"></a><span class="w">    </span><span class="n">plugin_interface</span><span class="o">-&gt;</span><span class="n">process</span><span class="p">();</span>
<a id="__codelineno-62-103" name="__codelineno-62-103" href="#__codelineno-62-103"></a><span class="p">}</span>
<a id="__codelineno-62-104" name="__codelineno-62-104" href="#__codelineno-62-104"></a>
<a id="__codelineno-62-105" name="__codelineno-62-105" href="#__codelineno-62-105"></a><span class="c1">// main.c</span>
<a id="__codelineno-62-106" name="__codelineno-62-106" href="#__codelineno-62-106"></a>
<a id="__codelineno-62-107" name="__codelineno-62-107" href="#__codelineno-62-107"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;core.c&quot;</span>
<a id="__codelineno-62-108" name="__codelineno-62-108" href="#__codelineno-62-108"></a>
<a id="__codelineno-62-109" name="__codelineno-62-109" href="#__codelineno-62-109"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-110" name="__codelineno-62-110" href="#__codelineno-62-110"></a><span class="w">    </span><span class="n">apr_initialize</span><span class="p">();</span>
<a id="__codelineno-62-111" name="__codelineno-62-111" href="#__codelineno-62-111"></a><span class="w">    </span><span class="n">apr_pool_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pool</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<a id="__codelineno-62-112" name="__codelineno-62-112" href="#__codelineno-62-112"></a>
<a id="__codelineno-62-113" name="__codelineno-62-113" href="#__codelineno-62-113"></a><span class="w">    </span><span class="n">PluginInterface</span><span class="w"> </span><span class="n">plugin1</span><span class="p">;</span>
<a id="__codelineno-62-114" name="__codelineno-62-114" href="#__codelineno-62-114"></a><span class="w">    </span><span class="n">PluginInterface</span><span class="w"> </span><span class="n">plugin2</span><span class="p">;</span>
<a id="__codelineno-62-115" name="__codelineno-62-115" href="#__codelineno-62-115"></a>
<a id="__codelineno-62-116" name="__codelineno-62-116" href="#__codelineno-62-116"></a><span class="w">    </span><span class="c1">// 加载插件1</span>
<a id="__codelineno-62-117" name="__codelineno-62-117" href="#__codelineno-62-117"></a><span class="w">    </span><span class="n">load_plugin</span><span class="p">(</span><span class="s">&quot;plugin1.so&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">plugin1</span><span class="p">);</span>
<a id="__codelineno-62-118" name="__codelineno-62-118" href="#__codelineno-62-118"></a>
<a id="__codelineno-62-119" name="__codelineno-62-119" href="#__codelineno-62-119"></a><span class="w">    </span><span class="c1">// 加载插件2</span>
<a id="__codelineno-62-120" name="__codelineno-62-120" href="#__codelineno-62-120"></a><span class="w">    </span><span class="n">load_plugin</span><span class="p">(</span><span class="s">&quot;plugin2.so&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">plugin2</span><span class="p">);</span>
<a id="__codelineno-62-121" name="__codelineno-62-121" href="#__codelineno-62-121"></a>
<a id="__codelineno-62-122" name="__codelineno-62-122" href="#__codelineno-62-122"></a><span class="w">    </span><span class="c1">// 使用插件1功能</span>
<a id="__codelineno-62-123" name="__codelineno-62-123" href="#__codelineno-62-123"></a><span class="w">    </span><span class="n">use_plugin_function</span><span class="p">(</span><span class="o">&amp;</span><span class="n">plugin1</span><span class="p">);</span>
<a id="__codelineno-62-124" name="__codelineno-62-124" href="#__codelineno-62-124"></a>
<a id="__codelineno-62-125" name="__codelineno-62-125" href="#__codelineno-62-125"></a><span class="w">    </span><span class="c1">// 使用插件2功能</span>
<a id="__codelineno-62-126" name="__codelineno-62-126" href="#__codelineno-62-126"></a><span class="w">    </span><span class="n">use_plugin_function</span><span class="p">(</span><span class="o">&amp;</span><span class="n">plugin2</span><span class="p">);</span>
<a id="__codelineno-62-127" name="__codelineno-62-127" href="#__codelineno-62-127"></a>
<a id="__codelineno-62-128" name="__codelineno-62-128" href="#__codelineno-62-128"></a><span class="w">    </span><span class="c1">// 卸载插件1</span>
<a id="__codelineno-62-129" name="__codelineno-62-129" href="#__codelineno-62-129"></a><span class="w">    </span><span class="n">unload_plugin</span><span class="p">(</span><span class="n">dso_handle</span><span class="p">);</span>
<a id="__codelineno-62-130" name="__codelineno-62-130" href="#__codelineno-62-130"></a>
<a id="__codelineno-62-131" name="__codelineno-62-131" href="#__codelineno-62-131"></a><span class="w">    </span><span class="c1">// 卸载插件2</span>
<a id="__codelineno-62-132" name="__codelineno-62-132" href="#__codelineno-62-132"></a><span class="w">    </span><span class="n">unload_plugin</span><span class="p">(</span><span class="n">dso_handle</span><span class="p">);</span>
<a id="__codelineno-62-133" name="__codelineno-62-133" href="#__codelineno-62-133"></a>
<a id="__codelineno-62-134" name="__codelineno-62-134" href="#__codelineno-62-134"></a><span class="w">    </span><span class="n">apr_pool_destroy</span><span class="p">(</span><span class="n">pool</span><span class="p">);</span>
<a id="__codelineno-62-135" name="__codelineno-62-135" href="#__codelineno-62-135"></a><span class="w">    </span><span class="n">apr_terminate</span><span class="p">();</span>
<a id="__codelineno-62-136" name="__codelineno-62-136" href="#__codelineno-62-136"></a>
<a id="__codelineno-62-137" name="__codelineno-62-137" href="#__codelineno-62-137"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-62-138" name="__codelineno-62-138" href="#__codelineno-62-138"></a><span class="p">}</span>
</code></pre></div>
<p>在这个示例中，我们有两个插件：<code>plugin1.cpp</code>和<code>plugin2.cpp</code>。每个插件都实现了插件接口中定义的初始化函数和处理函数。在<code>core.c</code>中，我们使用<code>load_plugin()</code>函数加载插件，并将插件的接口存储在相应的变量中。然后，我们可以通过调用<code>use_plugin_function()</code>函数来使用插件的功能。</p>
<p>请注意，此示例假设您已经将插件编译为动态链接库（例如<code>.so</code>文件）。您需要根据您的编译环境和目标平台进行相应的调整。</p>
<p>希望这个示例能够帮助您实现多个插件，并在插件之间进行通信。如有需要，您可以根据实际需求进行进一步的扩展和修改。</p>
<h2 id="poco-tmp">poco-tmp<a class="headerlink" href="#poco-tmp" title="Permanent link">&para;</a></h2>
<p>是的，您也可以使用函数来封装 POCO 动态加载和管理插件的功能，而不一定非要使用类。</p>
<p>以下是一个示例，展示了如何使用函数来封装 POCO 动态加载和管理插件的功能：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="c1">// plugin_interface.h</span>
<a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a>
<a id="__codelineno-63-3" name="__codelineno-63-3" href="#__codelineno-63-3"></a><span class="cp">#ifdef __cplusplus</span>
<a id="__codelineno-63-4" name="__codelineno-63-4" href="#__codelineno-63-4"></a><span class="k">extern</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-63-5" name="__codelineno-63-5" href="#__codelineno-63-5"></a><span class="cp">#endif</span>
<a id="__codelineno-63-6" name="__codelineno-63-6" href="#__codelineno-63-6"></a>
<a id="__codelineno-63-7" name="__codelineno-63-7" href="#__codelineno-63-7"></a><span class="c1">// 定义C接口的插件接口结构体</span>
<a id="__codelineno-63-8" name="__codelineno-63-8" href="#__codelineno-63-8"></a><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-63-9" name="__codelineno-63-9" href="#__codelineno-63-9"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">initialize</span><span class="p">)(</span><span class="kt">void</span><span class="p">);</span><span class="w">  </span><span class="c1">// 初始化函数指针</span>
<a id="__codelineno-63-10" name="__codelineno-63-10" href="#__codelineno-63-10"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">process</span><span class="p">)(</span><span class="kt">void</span><span class="p">);</span><span class="w">     </span><span class="c1">// 处理函数指针</span>
<a id="__codelineno-63-11" name="__codelineno-63-11" href="#__codelineno-63-11"></a><span class="p">}</span><span class="w"> </span><span class="n">PluginInterface</span><span class="p">;</span>
<a id="__codelineno-63-12" name="__codelineno-63-12" href="#__codelineno-63-12"></a>
<a id="__codelineno-63-13" name="__codelineno-63-13" href="#__codelineno-63-13"></a><span class="cp">#ifdef __cplusplus</span>
<a id="__codelineno-63-14" name="__codelineno-63-14" href="#__codelineno-63-14"></a><span class="p">}</span>
<a id="__codelineno-63-15" name="__codelineno-63-15" href="#__codelineno-63-15"></a><span class="cp">#endif</span>
<a id="__codelineno-63-16" name="__codelineno-63-16" href="#__codelineno-63-16"></a>
<a id="__codelineno-63-17" name="__codelineno-63-17" href="#__codelineno-63-17"></a><span class="c1">// plugin1.cpp</span>
<a id="__codelineno-63-18" name="__codelineno-63-18" href="#__codelineno-63-18"></a>
<a id="__codelineno-63-19" name="__codelineno-63-19" href="#__codelineno-63-19"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<a id="__codelineno-63-20" name="__codelineno-63-20" href="#__codelineno-63-20"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;plugin_interface.h&quot;</span>
<a id="__codelineno-63-21" name="__codelineno-63-21" href="#__codelineno-63-21"></a>
<a id="__codelineno-63-22" name="__codelineno-63-22" href="#__codelineno-63-22"></a><span class="c1">// 实现插件1</span>
<a id="__codelineno-63-23" name="__codelineno-63-23" href="#__codelineno-63-23"></a><span class="k">class</span><span class="w"> </span><span class="nc">Plugin1</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-63-24" name="__codelineno-63-24" href="#__codelineno-63-24"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-63-25" name="__codelineno-63-25" href="#__codelineno-63-25"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">initialize</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-63-26" name="__codelineno-63-26" href="#__codelineno-63-26"></a><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Plugin1 initialized&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-63-27" name="__codelineno-63-27" href="#__codelineno-63-27"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-63-28" name="__codelineno-63-28" href="#__codelineno-63-28"></a>
<a id="__codelineno-63-29" name="__codelineno-63-29" href="#__codelineno-63-29"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">process</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-63-30" name="__codelineno-63-30" href="#__codelineno-63-30"></a><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Plugin1 processing&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-63-31" name="__codelineno-63-31" href="#__codelineno-63-31"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-63-32" name="__codelineno-63-32" href="#__codelineno-63-32"></a><span class="p">};</span>
<a id="__codelineno-63-33" name="__codelineno-63-33" href="#__codelineno-63-33"></a>
<a id="__codelineno-63-34" name="__codelineno-63-34" href="#__codelineno-63-34"></a><span class="c1">// 将C++的实现转换为C接口</span>
<a id="__codelineno-63-35" name="__codelineno-63-35" href="#__codelineno-63-35"></a><span class="k">extern</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-63-36" name="__codelineno-63-36" href="#__codelineno-63-36"></a><span class="w">    </span><span class="n">PluginInterface</span><span class="w"> </span><span class="n">plugin1_interface</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-63-37" name="__codelineno-63-37" href="#__codelineno-63-37"></a><span class="w">        </span><span class="p">.</span><span class="n">initialize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Plugin1</span><span class="o">::</span><span class="n">initialize</span><span class="p">,</span>
<a id="__codelineno-63-38" name="__codelineno-63-38" href="#__codelineno-63-38"></a><span class="w">        </span><span class="p">.</span><span class="n">process</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Plugin1</span><span class="o">::</span><span class="n">process</span>
<a id="__codelineno-63-39" name="__codelineno-63-39" href="#__codelineno-63-39"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-63-40" name="__codelineno-63-40" href="#__codelineno-63-40"></a><span class="p">}</span>
<a id="__codelineno-63-41" name="__codelineno-63-41" href="#__codelineno-63-41"></a>
<a id="__codelineno-63-42" name="__codelineno-63-42" href="#__codelineno-63-42"></a><span class="c1">// plugin2.cpp</span>
<a id="__codelineno-63-43" name="__codelineno-63-43" href="#__codelineno-63-43"></a>
<a id="__codelineno-63-44" name="__codelineno-63-44" href="#__codelineno-63-44"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<a id="__codelineno-63-45" name="__codelineno-63-45" href="#__codelineno-63-45"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;plugin_interface.h&quot;</span>
<a id="__codelineno-63-46" name="__codelineno-63-46" href="#__codelineno-63-46"></a>
<a id="__codelineno-63-47" name="__codelineno-63-47" href="#__codelineno-63-47"></a><span class="c1">// 实现插件2</span>
<a id="__codelineno-63-48" name="__codelineno-63-48" href="#__codelineno-63-48"></a><span class="k">class</span><span class="w"> </span><span class="nc">Plugin2</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-63-49" name="__codelineno-63-49" href="#__codelineno-63-49"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-63-50" name="__codelineno-63-50" href="#__codelineno-63-50"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">initialize</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-63-51" name="__codelineno-63-51" href="#__codelineno-63-51"></a><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Plugin2 initialized&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-63-52" name="__codelineno-63-52" href="#__codelineno-63-52"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-63-53" name="__codelineno-63-53" href="#__codelineno-63-53"></a>
<a id="__codelineno-63-54" name="__codelineno-63-54" href="#__codelineno-63-54"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">process</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-63-55" name="__codelineno-63-55" href="#__codelineno-63-55"></a><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Plugin2 processing&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-63-56" name="__codelineno-63-56" href="#__codelineno-63-56"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-63-57" name="__codelineno-63-57" href="#__codelineno-63-57"></a><span class="p">};</span>
<a id="__codelineno-63-58" name="__codelineno-63-58" href="#__codelineno-63-58"></a>
<a id="__codelineno-63-59" name="__codelineno-63-59" href="#__codelineno-63-59"></a><span class="c1">// 将C++的实现转换为C接口</span>
<a id="__codelineno-63-60" name="__codelineno-63-60" href="#__codelineno-63-60"></a><span class="k">extern</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-63-61" name="__codelineno-63-61" href="#__codelineno-63-61"></a><span class="w">    </span><span class="n">PluginInterface</span><span class="w"> </span><span class="n">plugin2_interface</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-63-62" name="__codelineno-63-62" href="#__codelineno-63-62"></a><span class="w">        </span><span class="p">.</span><span class="n">initialize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Plugin2</span><span class="o">::</span><span class="n">initialize</span><span class="p">,</span>
<a id="__codelineno-63-63" name="__codelineno-63-63" href="#__codelineno-63-63"></a><span class="w">        </span><span class="p">.</span><span class="n">process</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Plugin2</span><span class="o">::</span><span class="n">process</span>
<a id="__codelineno-63-64" name="__codelineno-63-64" href="#__codelineno-63-64"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-63-65" name="__codelineno-63-65" href="#__codelineno-63-65"></a><span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="c1">// core.cpp</span>
<a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a>
<a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Poco/ClassLoader.h&gt;</span>
<a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Poco/Manifest.h&gt;</span>
<a id="__codelineno-64-6" name="__codelineno-64-6" href="#__codelineno-64-6"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;plugin_interface.h&quot;</span>
<a id="__codelineno-64-7" name="__codelineno-64-7" href="#__codelineno-64-7"></a>
<a id="__codelineno-64-8" name="__codelineno-64-8" href="#__codelineno-64-8"></a><span class="k">typedef</span><span class="w"> </span><span class="n">Poco</span><span class="o">::</span><span class="n">ClassLoader</span><span class="o">&lt;</span><span class="n">PluginInterface</span><span class="o">&gt;</span><span class="w"> </span><span class="n">PluginClassLoader</span><span class="p">;</span>
<a id="__codelineno-64-9" name="__codelineno-64-9" href="#__codelineno-64-9"></a><span class="k">typedef</span><span class="w"> </span><span class="n">Poco</span><span class="o">::</span><span class="n">Manifest</span><span class="o">&lt;</span><span class="n">PluginInterface</span><span class="o">&gt;</span><span class="w"> </span><span class="n">PluginManifest</span><span class="p">;</span>
<a id="__codelineno-64-10" name="__codelineno-64-10" href="#__codelineno-64-10"></a>
<a id="__codelineno-64-11" name="__codelineno-64-11" href="#__codelineno-64-11"></a><span class="kt">void</span><span class="w"> </span><span class="nf">loadPlugins</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-64-12" name="__codelineno-64-12" href="#__codelineno-64-12"></a><span class="w">    </span><span class="n">PluginClassLoader</span><span class="w"> </span><span class="n">loader</span><span class="p">;</span>
<a id="__codelineno-64-13" name="__codelineno-64-13" href="#__codelineno-64-13"></a>
<a id="__codelineno-64-14" name="__codelineno-64-14" href="#__codelineno-64-14"></a><span class="w">    </span><span class="c1">// 添加插件库路径</span>
<a id="__codelineno-64-15" name="__codelineno-64-15" href="#__codelineno-64-15"></a><span class="w">    </span><span class="n">loader</span><span class="p">.</span><span class="n">addLibrary</span><span class="p">(</span><span class="s">&quot;plugin1&quot;</span><span class="p">);</span>
<a id="__codelineno-64-16" name="__codelineno-64-16" href="#__codelineno-64-16"></a><span class="w">    </span><span class="n">loader</span><span class="p">.</span><span class="n">addLibrary</span><span class="p">(</span><span class="s">&quot;plugin2&quot;</span><span class="p">);</span>
<a id="__codelineno-64-17" name="__codelineno-64-17" href="#__codelineno-64-17"></a>
<a id="__codelineno-64-18" name="__codelineno-64-18" href="#__codelineno-64-18"></a><span class="w">    </span><span class="c1">// 加载插件</span>
<a id="__codelineno-64-19" name="__codelineno-64-19" href="#__codelineno-64-19"></a><span class="w">    </span><span class="n">loader</span><span class="p">.</span><span class="n">loadAll</span><span class="p">();</span>
<a id="__codelineno-64-20" name="__codelineno-64-20" href="#__codelineno-64-20"></a>
<a id="__codelineno-64-21" name="__codelineno-64-21" href="#__codelineno-64-21"></a><span class="w">    </span><span class="c1">// 获取已加载的插件列表</span>
<a id="__codelineno-64-22" name="__codelineno-64-22" href="#__codelineno-64-22"></a><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">PluginClassLoader</span><span class="o">::</span><span class="n">LibraryVec</span><span class="o">&amp;</span><span class="w"> </span><span class="n">libraries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">loader</span><span class="p">.</span><span class="n">getLoadedLibraries</span><span class="p">();</span>
<a id="__codelineno-64-23" name="__codelineno-64-23" href="#__codelineno-64-23"></a>
<a id="__codelineno-64-24" name="__codelineno-64-24" href="#__codelineno-64-24"></a><span class="w">    </span><span class="c1">// 遍历插件并使用插件功能</span>
<a id="__codelineno-64-25" name="__codelineno-64-25" href="#__codelineno-64-25"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">library</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">libraries</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-64-26" name="__codelineno-64-26" href="#__codelineno-64-26"></a><span class="w">        </span><span class="n">PluginManifest</span><span class="o">::</span><span class="n">Iterator</span><span class="w"> </span><span class="n">it</span><span class="p">(</span><span class="n">library</span><span class="p">);</span>
<a id="__codelineno-64-27" name="__codelineno-64-27" href="#__codelineno-64-27"></a><span class="w">        </span><span class="n">PluginInterface</span><span class="o">*</span><span class="w"> </span><span class="n">plugin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">it</span><span class="p">.</span><span class="n">createInstance</span><span class="p">();</span>
<a id="__codelineno-64-28" name="__codelineno-64-28" href="#__codelineno-64-28"></a>
<a id="__codelineno-64-29" name="__codelineno-64-29" href="#__codelineno-64-29"></a><span class="w">        </span><span class="c1">// 调用插件的初始化函数</span>
<a id="__codelineno-64-30" name="__codelineno-64-30" href="#__codelineno-64-30"></a><span class="w">        </span><span class="n">plugin</span><span class="o">-&gt;</span><span class="n">initialize</span><span class="p">();</span>
<a id="__codelineno-64-31" name="__codelineno-64-31" href="#__codelineno-64-31"></a>
<a id="__codelineno-64-32" name="__codelineno-64-32" href="#__codelineno-64-32"></a><span class="w">        </span><span class="c1">// 调用插件的处理函数</span>
<a id="__codelineno-64-33" name="__codelineno-64-33" href="#__codelineno-64-33"></a><span class="w">        </span><span class="n">plugin</span><span class="o">-&gt;</span><span class="n">process</span><span class="p">();</span>
<a id="__codelineno-64-34" name="__codelineno-64-34" href="#__codelineno-64-34"></a>
<a id="__codelineno-64-35" name="__codelineno-64-35" href="#__codelineno-64-35"></a><span class="w">        </span><span class="k">delete</span><span class="w"> </span><span class="n">plugin</span><span class="p">;</span>
<a id="__codelineno-64-36" name="__codelineno-64-36" href="#__codelineno-64-36"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-64-37" name="__codelineno-64-37" href="#__codelineno-64-37"></a><span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="c1">// main.cpp</span>
<a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a>
<a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;core.cpp&quot;</span>
<a id="__codelineno-65-4" name="__codelineno-65-4" href="#__codelineno-65-4"></a>
<a id="__codelineno-65-5" name="__codelineno-65-5" href="#__codelineno-65-5"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-65-6" name="__codelineno-65-6" href="#__codelineno-65-6"></a><span class="w">    </span><span class="n">loadPlugins</span><span class="p">();</span>
<a id="__codelineno-65-7" name="__codelineno-65-7" href="#__codelineno-65-7"></a>
<a id="__codelineno-65-8" name="__codelineno-65-8" href="#__codelineno-65-8"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-65-9" name="__codelineno-65-9" href="#__codelineno-65-9"></a><span class="p">}</span>
</code></pre></div>
<p>在这个示例中，我们将 POCO 动态加载和管理插件的功能封装在了一个名为 <code>loadPlugins()</code> 的函数中。该函数执行了与之前示例相同的加载和使用插件的逻辑。</p>
<p>在 "main.cpp" 中，我们直接调用了 <code>loadPlugins()</code> 函数，以加载和使用插件。</p>
<p>这样，您就可以通过调用函数来使用 POCO 动态加载和管理插件的功能，而无需使用类。</p>
<p>希望这次回答能够满足您的需求，如果还有任何问题，请随时提问。</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 - 2024 smileatl
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/smileatl" target="_blank" rel="noopener" title="GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:<songlei.lin@qq.com>" target="_blank" rel="noopener" title="TEmail" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M64 112c-8.8 0-16 7.2-16 16v22.1l172.5 141.6c20.7 17 50.4 17 71.1 0L464 150.1V128c0-8.8-7.2-16-16-16zM48 212.2V384c0 8.8 7.2 16 16 16h384c8.8 0 16-7.2 16-16V212.2L322 328.8c-38.4 31.5-93.7 31.5-132 0zM0 128c0-35.3 28.7-64 64-64h384c35.3 0 64 28.7 64 64v256c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://space.bilibili.com/343556699?spm_id_from=333.999.0.0" target="_blank" rel="noopener" title="Bilibili" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M488.6 104.1c16.7 18.1 24.4 39.7 23.3 65.7v202.4c-.4 26.4-9.2 48.1-26.5 65.1-17.2 17-39.1 25.9-65.5 26.7H92.02c-26.45-.8-48.21-9.8-65.28-27.2C9.682 419.4.767 396.5 0 368.2V169.8c.767-26 9.682-47.6 26.74-65.7C43.81 87.75 65.57 78.77 92.02 78h29.38L96.05 52.19c-5.75-5.73-8.63-13-8.63-21.79 0-8.8 2.88-16.06 8.63-21.797C101.8 2.868 109.1 0 117.9 0q13.2 0 21.9 8.603L213.1 78h88l74.5-69.397C381.7 2.868 389.2 0 398 0q13.2 0 21.9 8.603c5.7 5.737 8.6 12.997 8.6 21.797 0 8.79-2.9 16.06-8.6 21.79L394.6 78h29.3c26.4.77 48 9.75 64.7 26.1m-38.8 69.7c-.4-9.6-3.7-17.4-10.7-23.5-5.2-6.1-14-9.4-22.7-9.8H96.05c-9.59.4-17.45 3.7-23.58 9.8-6.14 6.1-9.4 13.9-9.78 23.5v194.4c0 9.2 3.26 17 9.78 23.5s14.38 9.8 23.58 9.8H416.4c9.2 0 17-3.3 23.3-9.8s9.7-14.3 10.1-23.5zm-264.3 42.7c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.2 6.3-14 9.5-23.6 9.5s-17.5-3.2-23.6-9.5-9.4-14-9.8-23.2v-33.3c.4-9.1 3.8-16.9 10.1-23.2s13.2-9.6 23.3-10c9.2.4 17 3.7 23.3 10m191.5 0c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2s-14 9.5-23.6 9.5-17.4-3.2-23.6-9.5c-7-6.3-9.4-14-9.7-23.2v-33.3c.3-9.1 3.7-16.9 10-23.2s14.1-9.6 23.3-10c9.2.4 17 3.7 23.3 10"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.douban.com/people/172023060/" target="_blank" rel="noopener" title="Douban" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M.51 3.06h22.98V.755H.51zm20.976 2.537v9.608h-2.137l-1.669 5.76H24v2.28H0v-2.28h6.32l-1.67-5.76H2.515V5.597h18.972Zm-5.066 9.608H7.58l1.67 5.76h5.501zM18.367 7.9H5.634v5.025h12.733z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.action.edit", "content.action.view", "content.code.copy", "navigation.tabs", "navigation.top", "navigation.footer", "search.suggest", "search.highlight", "search.share"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js"></script>
      
    
  </body>
</html>